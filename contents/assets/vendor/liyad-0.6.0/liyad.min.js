!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.liyad=r():e.liyad=r()}(this,(function(){return(()=>{"use strict";var __webpack_modules__={140:(e,r,n)=>{n.r(r),n.d(r,{FatalError:()=>t.kb,L:()=>dn,LM:()=>kn,LM_async:()=>En,LS:()=>bn,LSX:()=>xn,LSX_async:()=>Cn,LS_async:()=>wn,L_async:()=>vn,MaxEvaluationCountError:()=>t.cq,S:()=>T,SExpression:()=>j,SExpressionAsync:()=>O,ScriptTerminationError:()=>t.UK,backquote:()=>o.zz,builtinMacros:()=>Wn,builtinOperators:()=>Pn,builtinSymbols:()=>qn,defaultConfig:()=>a,defaultReservedNames:()=>s,installArithmetic:()=>Ar,installConcurrent:()=>gn,installCore:()=>rr,installJsx:()=>Xn,installSequence:()=>sn,isBackquoted:()=>o.zB,isQuoted:()=>o.sg,isSymbol:()=>o.yk,isUnquoted:()=>o.sV,lisp:()=>hn,lisp_async:()=>Sn,quote:()=>o.mW,runScriptTags:()=>Mn,splice:()=>o.db,spread:()=>o.hw,wrapByUnquote:()=>o.rL});var t=n(713),o=n(788);const s={eval:"$eval",quote:"$quote",backquote:"$backquote",unquote:"$unquote",spread:"$spread",splice:"$splice",car:"$car",cdr:"$cdr",cons:"$cons",atom:"$atom",eq:"$eq",list:"$list",let:"$clisp-let",lambda:"$lambda",self:"$self",defun:"$defun",thiz:"$this",if:"$if",cond:"$cond",while:"$while",doWhile:"$do-while",until:"$until",doUntil:"$do-until",get:"$get",defvar:"$clisp-defvar",setq:"$clisp-setq",set:"$set",call:"$call",not:"$not",and:"$and",or:"$or",isSymbol:"$is-symbol",gensym:"$gensym",raise:"$raise",catch:"$catch",Template:"Template"},a={raiseOnUnresolvedSymbol:!1,enableEvaluate:!0,enableHereDoc:!0,enableSpread:!0,enableSplice:!0,enableShorthands:!0,enableVerbatimStringLiteral:!0,enableTailCallOptimization:!0,enableRegExpMatchOperators:!0,enableCompilationOperators:!0,stripComments:!1,wrapExternalValue:!0,returnMultipleRoot:!1,maxEvalCount:0,reservedNames:s,symbols:[],macros:[],funcs:[]};function i(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"eof")}function l(e){return"string"==typeof e&&0===e.trim().length}function c(e){return"string"==typeof e&&/^[0-9\+\-]$/.test(e)}function m(e){return"string"==typeof e&&/^[0-9]$/.test(e)}function u(e){return"string"==typeof e&&!l(e)&&!c(e)}function f(e){return`line: ${e.line} / strings: ${e.index} / pos: ${e.pos} :${e.strings.length>e.index?e.strings[e.index].slice(e.pos,e.pos+20):""}`}function p(e,r,n){if(e.strings.length<=e.index)return{eof:!0};if(e.strings[e.index].length<=e.pos){if(!e.values||e.values.length<=e.index)return e.pos=0,e.index++,p(e);{const r={value:e.values[e.index]};return e.pos=0,e.index++,r}}if(r)for(const n of r){const r=e.strings[e.index].slice(e.pos,e.pos+n.length);if(r===n)return e.pos+=n.length,e.line+=r.split("\n").length-1,{eof:!1,eofSeq:n}}{let r=e.strings[e.index].slice(e.pos,e.pos+1);if(e.pos++,"\n"===r&&e.line++,!n&&"\\"===r){if(e.strings[e.index].length<=e.pos)throw new Error(`[SX] getChar: Invalid syntax at: ${f(e)}.`);switch(r=e.strings[e.index].slice(e.pos,e.pos+1),e.pos++,r){case"b":r="\b";break;case"t":r="\t";break;case"n":r="\n";break;case"v":r="\v";break;case"f":r="\f";break;case"r":r="\r";break;case"U":case"u":if("{"===e.strings[e.index].slice(e.pos,e.pos+1)){let n="";for(let r=0;r<6;r++){const t=e.strings[e.index].slice(e.pos+r,e.pos+1+r);if("}"===t){if(0===r)throw new Error(`[SX] getChar: Invalid syntax at: ${f(e)}.`);e.pos+=r;break}if(!/^[0-9A-Fa-f]{1}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${f(e)}.`);n+=t}if("}"!==e.strings[e.index].slice(e.pos,e.pos+1))throw new Error(`[SX] getChar: Invalid syntax at: ${f(e)}.`);e.pos++,r=String.fromCodePoint(Number.parseInt(n,16))}else{const n=e.strings[e.index].slice(e.pos,e.pos+4);if(!/^[0-9A-Fa-f]{4}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${f(e)}.`);e.pos+=4,r=String.fromCodePoint(Number.parseInt(n,16))}}}return r}}function _(e,r,n,t){const o=e.index,s=e.pos,a=e.line,i=[];try{for(let o=0;o<r;o++)i.push(p(e,n,t))}finally{e.index=o,e.pos=s,e.line=a}return i}function $(e,r,n){const t=e.index,o=e.pos,s=e.line;let a;try{a=p(e,r,n)}finally{e.index=t,e.pos=o,e.line=s}return a}function y(e){let r=$(e);for(;!i(r)&&l(r);)p(e),r=$(e)}function g(e,r){let n="",t=$(e,r);for(;!i(t)&&"string"==typeof t;){if(/^0[XxOoBb][0-9]*$/.test(n+t))p(e,r),n+=t;else{if(!/^[0-9\+\-\.EeInfinityNaN]+$/.test(n+t))break;p(e,r),n+=t}t=$(e,r)}if(!/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)|(0[XxOoBb][0-9]+)|([\+\-]Infinity)|(NaN)$/.test(n))throw new Error(`[SX] parseNumber: Invalid syntax at: ${f(e)}.`);return Number(n)}function d(e,r){let n="",t=$(e,r);for(;!i(t);){if("string"==typeof t){if(l(t))break;if("#"===t&&"|"===_(e,2,r)[1])break;if(!/^[^.;()"]+$/.test(n+t))break;p(e,r),n+=t}else{if("object"!=typeof t||!Object.prototype.hasOwnProperty.call(t,"value"))throw new Error(`[SX] parseSymbol: Invalid syntax at: ${f(e)}.`);p(e,r),t.value,n+=String(t)}t=$(e,r)}if(e.config.enableShorthands){let r=null;if(r=n.match(/^:((?:\:[^=:]+?)+?)=$/)){const n=r[1].slice(1).split(":");return[{symbol:e.config.reservedNames.splice},[{symbol:e.config.reservedNames.set},n]]}if(r=n.match(/^:((?:\:[^@:]+?)+?)@([^@:]+?)$/)){const n=r[1].slice(1).split(":");return[{symbol:e.config.reservedNames.splice},[{symbol:e.config.reservedNames.call},[{symbol:e.config.reservedNames.get},...n],{symbol:r[2]}]]}if(r=n.match(/^:((?:\:[^:]+?)+?)$/)){const n=r[1].slice(1).split(":");return[{symbol:e.config.reservedNames.get},...n]}}return{symbol:n}}function b(e,r,n,o,s,a){const l=n?[...r,n]:r,c=[],m=[];for(;;){let r="",u=$(e,l,s);for(;!i(u);){if("string"==typeof u)p(e,l,s),r+=u;else{if("object"!=typeof u||!Object.prototype.hasOwnProperty.call(u,"value"))throw new Error(`[SX] parseStringOrComment: Invalid syntax at: ${f(e)}.`);p(e,l,s),u.value,r+=String(u)}u=$(e,l,s)}if(p(e,l,s),!0===u.eof&&!a)throw new t.UK("parseStringOrComment");if(c.push(r),u.eofSeq!==n)break;m.push(E(e,o,[]))}return{strings:c,values:m}}function h(e,r){return b(e,['"'],null,")",r,!1).strings[0]}function v(e,r,n){const t=[r];n&&t.push(n);const o=b(e,['"""'],"%%%(",")",!1,!1);for(let e=0;e<o.strings.length;e++)t.push(o.strings[e]),e<o.values.length&&t.push(o.values[e]);return t}function w(e){return{comment:b(e,["\r","\n"],null,")",!1,!0).strings[0]}}function S(e){return{comment:b(e,["|#"],null,")",!1,!1).strings[0]}}function k(e){y(e);let r=$(e);for(;!i(r);){switch(r){case")":throw new Error(`[SX] parseOneToken: Invalid syntax at: ${f(e)}.`);case"(":return p(e),E(e,")",[]);case"'":case"`":case",":{p(e);const n=$(e);let t=!1;","===r&&"@"===n&&(p(e),t=!0),y(e);const s=("'"===r?o.mW:"`"===r?o.zz:o.rL)(e,k(e));return t?(0,o.db)(e,s):s}case".":{p(e);const r=_(e,2);return e.config.enableSpread&&"."===r[0]&&"."===r[1]?(p(e),p(e),y(e),(0,o.hw)(e,k(e))):(y(e),{dotted:k(e)})}case";":return p(e),w(e);case"#":return"|"===_(e,2)[1]?(p(e),p(e),S(e)):d(e);case'"':{p(e);const r=_(e,4);if(e.config.enableHereDoc&&'"'===r[0]&&'"'===r[1]){let n=!0;i(r[2])||l(r[2])||(c(r[2])?"+"!==r[2]&&"-"!==r[2]||m(r[3])||(n=!1):u(r[2])&&(n=!1)),p(e),p(e);let t=null,o=null;if(n)t={symbol:e.config.reservedNames.Template};else{if(t=d(e,["@"]),null===t)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${f(e)}.`);if("number"==typeof t)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${f(e)}.`);const r=_(e,2);if("@"===r[0]){if("{"!==r[1])throw new Error(`[SX] parseOneToken: Invalid syntax at: ${f(e)}.`);p(e),p(e);const n=E(e,"}",[{symbol:"@"}]);Array.isArray(n)&&(o=n)}}return v(e,t,o)}return h(e,!1)}case"@":if(e.config.enableVerbatimStringLiteral&&'"'===_(e,2)[1])return p(e),p(e),h(e,!0);default:if("string"!=typeof r){if("object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"value"))return p(e),e.config.wrapExternalValue?r:r.value;throw new Error(`[SX] parseOneToken: Invalid syntax at: ${f(e)}.`)}if(l(r))break;if(c(r))return"+"!==r&&"-"!==r||m(_(e,2)[1])?g(e):d(e);if(u(r))return d(e);throw new Error(`[SX] parseOneToken: Invalid syntax at: ${f(e)}.`)}y(e),r=$(e)}throw new t.UK("parseOneToken")}function E(e,r,n){const o=n.slice(0);let s=!1;y(e);let a=$(e);for(;!i(a);){switch(a){case r:return p(e),s?o[0]:o;default:{const r=k(e);if("object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"dotted")){if(1!==o.length)throw new Error(`[SX] parseList: Invalid syntax at: ${f(e)}.`);s=!0,Array.isArray(r)?(r.unshift(o.pop()),o.push(r)):o.push({car:o.pop(),cdr:r.dotted})}else if("object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"comment"))e.config.stripComments||o.push(r);else{if(s)throw new Error(`[SX] parseList: Invalid syntax at: ${f(e)}.`);o.push(r)}}}y(e),a=$(e)}throw new t.UK("parseList")}function A(e){const r=[];y(e);let n=$(e);for(;!i(n);){switch(n){case"(":p(e),r.push(E(e,")",[]));break;case"'":case"`":for(p(e),y(e);;){const t=k(e);if("object"!=typeof t||!Object.prototype.hasOwnProperty.call(t,"comment")){r.push(("'"===n?o.mW:o.zz)(e,t));break}e.config.stripComments||r.push(t)}break;case";":p(e),e.config.stripComments?w(e):r.push(w(e));break;case"#":"|"===_(e,2)[1]?(p(e),p(e),e.config.stripComments?S(e):r.push(S(e))):(p(e),e.config.stripComments?w(e):r.push(w(e)));break;case'"':{const n=_(e,3);if('"'===n[1]&&'"'===n[2]){r.push(k(e));break}}default:throw new Error(`[SX] parseInitialState: Invalid syntax at: ${f(e)}.`)}y(e),n=$(e)}return r}var H=n(759),N=function(e,r,n,t){return new(n||(n=Promise))((function(o,s){function a(e){try{l(t.next(e))}catch(e){s(e)}}function i(e){try{l(t.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(a,i)}l((t=t.apply(e,r||[])).next())}))};function I(e,r,n,t){return{strings:"string"==typeof n?[n]:n,values:t||[],index:0,pos:0,line:0,evalCount:0,scopes:[{isBlockLocal:!1,scope:r}],macroMap:new Map(e.macros.map((e=>[e.name,e]))),funcMap:new Map(e.funcs.map((e=>[e.name,e]))),symbolMap:new Map(e.symbols.map((e=>[e.name,e]))),config:e}}function Q(e,r,n){return e.strings="string"==typeof r?[r]:r,e.values=n||[],e.index=0,e.pos=0,e.line=0,e.evalCount=0,e}function j(e){let r=e||Object.assign({},a),n={},t=[];const o=(e,n)=>{if(r.enableEvaluate)for(let r=0;r<n.length;r++)n[r]=(0,H.ku)(e,n[r]);return r.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]},s=(e,...s)=>{const a=I(r,Object.assign({},n),e,s);return o(a,t.concat(A(a)))};return s.evaluateAST=e=>{const s=I(r,Object.assign({},n),"");return o(s,t.concat(e))},s.repl=()=>{const e=I(r,Object.assign({},n),"");o(e,t.slice(0));const s=(r,...n)=>(Q(e,r,n),o(e,A(e)));return s.sync=s,s},s.setGlobals=e=>(n=Object.assign({},e||{}),s),s.appendGlobals=e=>(n=Object.assign({},n,e||{}),s),s.setStartup=(e,...o)=>{const a=I(r,Object.assign({},n),e,o);return t=A(a),s},s.setStartupAST=e=>(t=e,s),s.appendStartup=(e,...o)=>{const a=I(r,Object.assign({},n),e,o);return t=t.concat(A(a)),s},s.appendStartupAST=e=>(t=t.concat(e),s),s.install=e=>(r=e(r),s),s}function O(e){let r=e||Object.assign({},a),n={},t=[];const o=(e,n)=>N(this,void 0,void 0,(function*(){if(r.enableEvaluate)for(let r=0;r<n.length;r++)n[r]=(0,H.ku)(e,n[r]),"object"==typeof n[r]&&null!==n[r]&&"function"==typeof n[r].then&&(n[r]=yield n[r]);return r.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]})),s=(e,...s)=>N(this,void 0,void 0,(function*(){const a=I(r,Object.assign({},n),e,s);return o(a,t.concat(A(a)))}));return s.evaluateAST=e=>{const s=I(r,Object.assign({},n),"");return o(s,t.concat(e))},s.repl=()=>{const e=I(r,Object.assign({},n),"");o(e,t.slice(0));const s=(r,...n)=>N(this,void 0,void 0,(function*(){return Q(e,r,n),o(e,A(e))}));return s.sync=(n,...t)=>(Q(e,n,t),((e,n)=>{if(r.enableEvaluate)for(let r=0;r<n.length;r++)n[r]=(0,H.ku)(e,n[r]);return r.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]})(e,A(e))),s},s.setGlobals=e=>(n=Object.assign({},e||{}),s),s.appendGlobals=e=>(n=Object.assign({},n,e||{}),s),s.setStartup=(e,...o)=>{const a=I(r,Object.assign({},n),e,o);return t=A(a),s},s.setStartupAST=e=>(t=e,s),s.appendStartup=(e,...o)=>{const a=I(r,Object.assign({},n),e,o);return t=t.concat(A(a)),s},s.appendStartupAST=e=>(t=t.concat(e),s),s.install=e=>(r=e(r),s),s}const T=(()=>{const e=Object.assign({},a);return e.enableEvaluate=!1,e.returnMultipleRoot=!0,j(e)})();var X=n(890),x=n(877),C=n(69);const M=(e,r)=>(...e)=>{(0,C.QH)("$car",e,1,1);const r=L(...e);if(!Array.isArray(r))throw new Error("[SX] $car: Invalid argument(s): args[0] is not array.");if(0===r.length)throw new Error("[SX] $car: Invalid argument(s): args[0] is nil.");return r[0]},P=(M(),(e,r)=>(...e)=>{(0,C.QH)("$cdr",e,1,1);const r=L(...e);if(!Array.isArray(r))throw new Error("[SX] $cdr: Invalid argument(s): args[0] is not array.");if(0===r.length)throw new Error("[SX] $cdr: Invalid argument(s): args[0] is nil.");return r.slice(1)}),W=(P(),(e,r)=>(...e)=>{(0,C.QH)("$cons",e,2,2);let{car:r,cdr:n}=R(...e);return null===r&&(r=[]),null===n&&(n=[]),Array.isArray(n)?(n=n.slice(0),n.unshift(r),n):{car:r,cdr:n}}),q=(W(),(e,r)=>(...e)=>{const r=e.slice(0,1);return 1===r.length?r[0]:null}),L=(...e)=>{const r=e.slice(0,1);return 1===r.length?r[0]:null},D=(...e)=>{const r=e.slice(1,2);return 1===r.length?r[0]:null},U=(e,r)=>(...e)=>{const r=e.slice(e.length-1,e.length);return 1===r.length?r[0]:null},R=(...e)=>{let r=e.slice(0,1);r=1===r.length?r[0]:null;let n=e.slice(1,2);return n=1===n.length?n[0]:null,{car:r,cdr:n}},B=(e,r)=>(...e)=>{(0,C.QH)("$atom",e,1,1);const r=L(...e);if(null==r)return!0;if(Array.isArray(r))return 0===r.length;switch(typeof r){case"number":case"string":case"function":case"boolean":return!0;case"object":return!!(0,o.yk)(r)}return!1},F=(B(),(e,r)=>(...e)=>{(0,C.QH)("$eq",e,2,2);const{car:r,cdr:n}=R(...e);return r===n}),z=(F(),(e,r)=>(...e)=>{(0,C.QH)("$notEq",e,2,2);const{car:r,cdr:n}=R(...e);return r!==n}),Z=(z(),(e,r)=>(...e)=>e.slice(0)),K=(e,r,n)=>(...r)=>{(0,C.QH)("$__scope",r,3);const t=L(...r),s=D(...r),{car:a,cdr:i}=R(...r.slice(2));let l=null;const c={};if(Array.isArray(a))for(const r of a)if(Array.isArray(r)){const n=R(...r),t=(0,o.yk)(n.car),s=t?t.symbol:String(n.car);(0,C.EZ)("$__scope",c,s),c[s]=(0,H.ku)(e,n.cdr)}else{const e=(0,o.yk)(r),n=e?e.symbol:String(r);(0,C.EZ)("$__scope",c,n),c[n]=null}(0,H.r6)(e,c,t,n);try{if(4<r.length)if(s){l=[];for(const n of r.slice(3))l.push((0,H.ku)(e,n))}else for(const n of r.slice(3))l=(0,H.ku)(e,n);else l=(0,H.ku)(e,i)}finally{(0,H.SI)(e)}return l},V=(e,r)=>(...r)=>{(0,C.QH)("$__lambda",r,2);const n=r[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let t=!1;for(let r=0;r<n.length;r++){const s=n[r];if(r===n.length-1&&e.config.enableSpread&&Array.isArray(s)&&(0,o.yk)(s[0],e.config.reservedNames.spread)){if(!(0,o.yk)(s[1]))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${r}] is not symbol.`);n[r]=s[1],t=!0}else if(!(0,o.yk)(s))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${r}] is not symbol.`)}let s=r.slice(1);e.config.enableTailCallOptimization&&(s=(0,H.bb)(e,n,s));const a=(0,H.h1)(e),i=function(...r){if(r.length+(t?1:0)<n.length)throw new Error(`[SX] func call: Actual args too short: actual ${r.length} / formal ${n.length}.`);return K(e,0,a)(!1,!1,[[e.config.reservedNames.self,i],[e.config.reservedNames.thiz,this===X.Be||void 0===this?null:(0,o.mW)(e,this)],...n.map(((s,a)=>[s.symbol,(0,o.mW)(e,t&&a===n.length-1?r.slice(a):r[a])]))],...s)};return i},G=(e,r)=>(...r)=>{(0,C.QH)("$$__lambda",r,2);const n=r[0];if(!Array.isArray(n))throw new Error("[SX] $$__lambda: Invalid argument(s): args[0] is not array.");let t=!1;for(let r=0;r<n.length;r++){const s=n[r];if(r===n.length-1&&e.config.enableSpread&&Array.isArray(s)&&(0,o.yk)(s[0],e.config.reservedNames.spread)){if(!(0,o.yk)(s[1]))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${r}] is not symbol.`);n[r]=s[1],t=!0}else if(!(0,o.yk)(s))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${r}] is not symbol.`)}const s=r.slice(1);return(0,x.t)(e,n,t,s)},J=(e,r)=>(...e)=>{(0,C.QH)("$apply",e,1);const r=L(...e);if("function"!=typeof r)throw new Error("[SX] $apply: Invalid argument(s): args[0] is not function.");return(...n)=>r.apply(null,e.slice(1).concat(n))},Y=(J(),(e,r)=>(...e)=>{throw L(...e)}),ee=(Y(),(e,r)=>(...e)=>{(0,C.QH)("$pipe",e,1);let r=e[0];for(let n=1;n<e.length;n++)r=e[n](r);return r}),re=(ee(),(e,r)=>(...r)=>{(0,C.QH)("$__let",r,2,2);let n=(0,o.yk)(L(...r));if(!n){if("string"!=typeof r[0])throw new Error("[SX] $__let: Invalid argument(s): invalid name.");n={symbol:r[0]}}return(0,C.EZ)("$__let",{},n.symbol),(0,H.Xw)(e,n,!1)[n.symbol]=r[1],r[1]}),ne=(e,r)=>(...r)=>{(0,C.QH)("$__set",r,2,2);let n=[];Array.isArray(r[0])?n=r[0]:n.push(r[0]);let t=(0,o.yk)(n[0]);if(!t){if("string"!=typeof n[0])throw new Error("[SX] $__set: Invalid argument(s): invalid name.");(0,C.EZ)("$__set",{},n[0]),t={symbol:n[0]}}let s=(0,H.Xw)(e,t,!0);if(null===s)throw new Error(`[SX] $__set: Unresolved symbol: ${t.symbol}.`);let a=!1;for(let i=0;i<n.length;i++){let l=n[i],c=!0;const m=i===n.length-1;for(;c;)switch(typeof l){case"function":s=l(s),c=!1;break;case"object":if(Array.isArray(l))l=(0,H.ku)(e,l);else if(t=(0,o.yk)(l),t)l=t.symbol;else{if(!Object.prototype.hasOwnProperty.call(l,"value"))throw new Error("[SX] $__set: Invalid argument(s): invalid name.");l=(0,H.ku)(e,l)}break;case"number":l<0&&(l=s.length+l);case"string":(0,C.EZ)("$__set",s,l),m?(s[l]=r[1],a=!0):s=s[l],c=!1;break;default:throw new Error("[SX] $__set: Invalid argument(s): invalid name.")}}if(!a)throw new Error("[SX] $__set: Invalid argument(s): last path is not lvalue.");return r[1]},te=(e,r)=>(...e)=>{(0,C.QH)("$boolean",e,1,1);const r=L(...e);return(!Array.isArray(r)||0!==r.length)&&Boolean(r)},oe=te(),se=(e,r)=>(...e)=>((0,C.QH)("$not",e,1,1),!oe(...e)),ae=se(),ie=(e,r)=>(...r)=>{(0,C.QH)("$__and",r,1);let n=null;for(let t=0;t<r.length;t++){const o=(0,H.ku)(e,r[t]);if(!oe(o))return o;n=o}return n},le=(ie(null),(e,r)=>(...r)=>{(0,C.QH)("$__or",r,1);let n=null;for(let t=0;t<r.length;t++){const o=(0,H.ku)(e,r[t]);if(oe(o))return o;n=o}return n}),ce=(le(null),(e,r)=>(...e)=>{(0,C.QH)("$ambiguousEq",e,2,2);let{car:r,cdr:n}=R(...e);return Array.isArray(r)&&0===r.length&&(r=null),Array.isArray(n)&&0===n.length&&(n=null),void 0===r&&(r=null),void 0===n&&(n=null),r==n}),me=ce(),ue=(e,r)=>(...e)=>!me(...e),fe=(ue(),(e,r)=>(...e)=>{(0,C.QH)("$lt",e,2,2);const{car:r,cdr:n}=R(...e);return(0,H.He)(r)<(0,H.He)(n)}),pe=(fe(),(e,r)=>(...e)=>{(0,C.QH)("$le",e,2,2);const{car:r,cdr:n}=R(...e);return(0,H.He)(r)<=(0,H.He)(n)}),_e=(pe(),(e,r)=>(...e)=>{(0,C.QH)("$gt",e,2,2);const{car:r,cdr:n}=R(...e);return(0,H.He)(r)>(0,H.He)(n)}),$e=(_e(),(e,r)=>(...e)=>{(0,C.QH)("$ge",e,2,2);const{car:r,cdr:n}=R(...e);return(0,H.He)(r)>=(0,H.He)(n)}),ye=($e(),(e,r)=>(...e)=>{(0,C.QH)("$typeof",e,1,1);const r=L(...e);if(null===r)return"null";const n=typeof r;switch(n){case"object":return Array.isArray(r)?"list":"object";case"symbol":return"js-symbol";default:return n}}),ge=(ye(),(e,r)=>(...e)=>{if((0,C.QH)("$symbol",e,1,1),"string"==typeof e[0])return{symbol:e[0]};throw new Error("[SX] $symbol: Invalid argument(s): item(s) of args[0] is not string.")}),de=(ge(),(e,r)=>(...e)=>{if((0,C.QH)("$isSymbol",e,1,2),1===e.length)return!!(0,o.yk)(e[0]);if("string"==typeof e[1])return!!(0,o.yk)(e[0],e[1]);throw new Error("[SX] $isSymbol: Invalid argument(s): item(s) of args[1] is not string.")}),be=(de(),(e,r)=>(...e)=>((0,C.QH)("$isNull",e,1,1),null===L(...e))),he=(be(),(e,r)=>(...e)=>{(0,C.QH)("$isNil",e,1,1);const r=L(...e);return Array.isArray(r)&&0===r.length}),ve=(he(),(e,r)=>(...e)=>((0,C.QH)("$isUndefined",e,1,1),void 0===L(...e))),we=(ve(),(e,r)=>(...e)=>((0,C.QH)("$isList",e,1,1),Array.isArray(L(...e)))),Se=(we(),(e,r)=>(...e)=>((0,C.QH)("$isString",e,1,1),"string"==typeof L(...e))),ke=(Se(),(e,r)=>(...e)=>((0,C.QH)("$isNumber",e,1,1),"number"==typeof L(...e))),Ee=(ke(),(e,r)=>(...e)=>((0,C.QH)("$isNaN",e,1,1),Number.isNaN(L(...e)))),Ae=(Ee(),(e,r)=>(...e)=>((0,C.QH)("$isFinite",e,1,1),Number.isFinite(L(...e)))),He=(Ae(),(e,r)=>(...e)=>((0,C.QH)("$isInteger",e,1,1),Number.isInteger(L(...e)))),Ne=(He(),(e,r)=>(...e)=>((0,C.QH)("$toString",e,1,1),String(L(...e)))),Ie=(Ne(),(e,r)=>(...e)=>((0,C.QH)("$toNumber",e,1,1),(0,H.He)(L(...e)))),Qe=(Ie(),[X.Be,Object.__proto__,{}.__proto__,Function.__proto__]),je=(e,r)=>(...e)=>{if((0,C.QH)("$objectAssign",e,1),Qe.includes(e[0]))throw new Error("[SX] $objectAssign: Invalid argument: args[0] is blacklisted object.");return Object.assign(e[0],...e.slice(1))},Oe=(je(),(e,r)=>(...e)=>((0,C.QH)("$jsonStringify",e,1,1),JSON.stringify(L(...e)))),Te=(Oe(),(e,r)=>(...e)=>{(0,C.QH)("$jsonParse",e,1,1);const r=L(...e);if("string"!=typeof r)throw new Error("[SX] $jsonParse: Invalid argument(s): args[0] is not string.");return JSON.parse(r)}),Xe=(Te(),(e,r)=>(...e)=>Date.now()),xe=(Xe(),(e,r)=>(...e)=>{(0,C.QH)("$datetimeFromIso",e,1,1);const r=L(...e);if("string"!=typeof r)throw new Error("[SX] $datetimeFromIso: Invalid argument(s): args[0] is not string.");if(!/^(?:(?:-[0-9]{6,})|[0-9]{4,})-(?:[0-1][0-9])-(?:[0-3][0-9])(?:T(?:[0-2][0-9])(?:[:](?:[0-6][0-9])(?:[:](?:[0-6][0-9])(?:.[0-9]{1,})?)?)?(?:Z|[-+][0-9]{2}(?:[:]?[0-6][0-9])?)?)?$/.test(r))throw new Error(`[SX] $datetimeFromIso: Invalid datetime (pattern unmatched): ${r}.`);const n=new Date(r).getTime();if(Number.isNaN(n))throw new Error(`[SX] $datetimeFromIso: Invalid datetime: ${r}.`);return n}),Ce=(xe(),(e,r)=>(...e)=>{(0,C.QH)("$datetime",e,3,7);let r="";const n=Number(e[0]);r+=n>=0?String(n).padStart(4,"0"):"-"+String(-n).padStart(6,"0"),r+="-"+String(Number(e[1])).padStart(2,"0"),r+="-"+String(Number(e[2])).padStart(2,"0"),e.length>=4&&(r+="T"+String(Number(e[3])).padStart(2,"0"),e.length>=5?r+=":"+String(Number(e[4])).padStart(2,"0"):r+=":00",e.length>=6&&(r+=":"+String(Number(e[5])).padStart(2,"0")),e.length>=7&&(r+="."+String(Number(e[6])).padStart(3,"0").slice(0,3)),r+="Z");const t=new Date(r).getTime();if(Number.isNaN(t))throw new Error(`[SX] $datetime: Invalid datetime: ${r}.`);return t}),Me=(Ce(),(e,r)=>(...e)=>{(0,C.QH)("$datetimeLc",e,3,7);let r="";const n=Number(e[0]);r+=n>=0?String(n).padStart(4,"0"):"-"+String(-n).padStart(6,"0"),r+="-"+String(Number(e[1])).padStart(2,"0"),r+="-"+String(Number(e[2])).padStart(2,"0"),e.length>=4?(r+="T"+String(Number(e[3])).padStart(2,"0"),e.length>=5?r+=":"+String(Number(e[4])).padStart(2,"0"):r+=":00",e.length>=6&&(r+=":"+String(Number(e[5])).padStart(2,"0")),e.length>=7&&(r+="."+String(Number(e[6])).padStart(3,"0").slice(0,3))):r+="T00:00:00.000";const t=new Date(r).getTime();if(Number.isNaN(t))throw new Error(`[SX] $datetimeLc: Invalid datetime: ${r}.`);return t}),Pe=(Me(),(e,r)=>(...e)=>{(0,C.QH)("$datetimeToIsoString",e,1,1);const r=L(...e);if("number"!=typeof r)throw new Error("[SX] $datetimeToIsoString: Invalid argument(s): args[0] is not number.");const n=new Date(r);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToIsoString: Invalid datetime: ${r}.`);return n.toISOString()}),We=(Pe(),(e,r)=>(...e)=>{(0,C.QH)("$datetimeToComponents",e,1,1);const r=L(...e);if("number"!=typeof r)throw new Error("[SX] $datetimeToComponents: Invalid argument(s): args[0] is not number.");const n=new Date(r);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToComponents: Invalid datetime: ${r}.`);return[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds(),0,n.getUTCDay()]}),qe=(We(),(e,r)=>(...e)=>{(0,C.QH)("$datetimeToComponentsLc",e,1,1);const r=L(...e);if("number"!=typeof r)throw new Error("[SX] $datetimeToComponentsLc: Invalid argument(s): args[0] is not number.");const n=new Date(r);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToComponentsLc: Invalid datetime: ${r}.`);return[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds(),-n.getTimezoneOffset(),n.getDay()]}),Le=(qe(),(e,r)=>(...r)=>{if((0,C.QH)("$match",r,2,3),!e.config.enableRegExpMatchOperators)throw new Error("[SX] $match: Operator is disabled by configuration.");return 2===r.length?new RegExp(r[0]).exec(r[1]):new RegExp(r[0],r[1]).exec(r[2])}),De=(Le(null),(e,r)=>(...e)=>(console.log(...e),null)),Ue=(De(),(e,r)=>(...e)=>(console.error(...e),null)),Re=(Ue(),(e,r)=>(...e)=>(console.trace(...e),null)),Be=(Re(),(e,r)=>(...e)=>(console.time(...e),null)),Fe=(Be(),(e,r)=>(...e)=>(console.timeEnd(...e),null)),ze=(Fe(),(e,r)=>(...e)=>(console.timeLog(...e),null)),Ze=(ze(),[{name:"$car",fn:M},{name:"$cdr",fn:P},{name:"$cons",fn:W},{name:"$first",fn:q},{name:"$second",fn:(e,r)=>(...e)=>{const r=e.slice(1,2);return 1===r.length?r[0]:null}},{name:"$last",fn:U},{name:"$progn",fn:U},{name:"$rest",fn:(e,r)=>(...e)=>{const r=e.slice(1);return 0<r.length?r:null}},{name:"$first-and-second",fn:(e,r)=>(...e)=>{let r=e.slice(0,1);r=1===r.length?r[0]:null;let n=e.slice(1,2);return n=1===n.length?n[0]:null,{car:r,cdr:n}}},{name:"$atom",fn:B},{name:"$eq",fn:F},{name:"===",fn:F},{name:"$not-eq",fn:z},{name:"!==",fn:z},{name:"$list",fn:Z},{name:"$__scope",fn:K},{name:"$__global",fn:(e,r)=>(...r)=>{(0,C.QH)("$__globalScope",r,1);const n=L(...r),t=D(...r);let o=null;(0,H.r6)(e,(0,H.lW)(e).scope,!0);try{if(2<r.length)if(n){o=[];for(const n of r.slice(1))o.push((0,H.ku)(e,n))}else for(const n of r.slice(1))o=(0,H.ku)(e,n);else o=(0,H.ku)(e,t)}finally{(0,H.SI)(e)}return o}},{name:"$__capture",fn:(e,r)=>(...r)=>{(0,C.QH)("$__capture",r,1);const n=r[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let t=null;const o=(0,H.cj)(e,n);(0,H.r6)(e,{},!0,o);try{for(const n of r.slice(1))t=(0,H.ku)(e,n)}finally{(0,H.SI)(e)}return t}},{name:"$__lambda",fn:V},{name:"$__defun",fn:(e,r)=>(...r)=>{(0,C.QH)("$__defun",r,3);const n=L(...r),t=V(e)(...r.slice(1));return(0,C.EZ)("$__defun",e.funcMap,n.symbol),e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,r)=>t}),t}},{name:"$__refun",fn:(e,r)=>(...r)=>{(0,C.QH)("$__refun",r,1,1);const n=L(...r);(0,C.EZ)("$__refun",e.funcMap,n.symbol);const t=e.funcMap.get(n.symbol);if(!t)throw new Error(`[SX] $__refun: function ${n.symbol} is not defined.`);return t.fn(e,n.symbol)}},{name:"$__defmacro",fn:(e,r)=>(...r)=>{(0,C.QH)("$__defmacro",r,3);const n=L(...r),t=r[1];if(!Array.isArray(t))throw new Error("[SX] $__defmacro: Invalid argument(s): args[1] is not array.");let s=!1;for(let r=0;r<t.length;r++){const n=t[r];if(r===t.length-1&&e.config.enableSpread&&Array.isArray(n)&&(0,o.yk)(n[0],e.config.reservedNames.spread)){if(!(0,o.yk)(n[1]))throw new Error(`[SX] $__defmacro: Invalid formal argument(s): item(s) of args[${r}] is not symbol.`);t[r]=n[1],s=!0}else if(!(0,o.yk)(n))throw new Error(`[SX] $__defmacro: Invalid formal argument(s): item(s) of args[${r}] is not symbol.`)}const a=r.slice(2),i=(0,H.h1)(e),l=r=>(...n)=>K(e,0,i)(!1,!1,[[e.config.reservedNames.self,l],...r.map(((t,a)=>[t.symbol,(0,o.mW)(e,s&&a===r.length-1?n.slice(a):n[a])]))],...a),c={name:n.symbol,fn:(e,r,n)=>e=>l(n)(...e.slice(1)),formalArgs:t,lastIsSpread:s};if((0,C.EZ)("$__defmacro",e.macroMap,n.symbol),e.macroMap.has(n.symbol)){let r=e.macroMap.get(n.symbol);if(r.next=c,r&&r.formalArgs)if(r.formalArgs.length<t.length)e.macroMap.set(n.symbol,c),c.next=r;else{let e=r;for(r=r.next;r;){if(r.formalArgs&&r.formalArgs.length<t.length){e.next=c,c.next=r;break}e=r,r=r.next}}}else e.macroMap.set(n.symbol,c);return l}},{name:"$apply",fn:J},{name:"$__call",fn:(e,r)=>(...r)=>{(0,C.QH)("$__call",r,2);const{car:n,cdr:t}=R(...r),s=(0,o.yk)(t),a=s?s.symbol:(0,H.ku)(e,t);return(0,C.EZ)("$__call",n,a),Function.prototype.apply.call(n[a],n,r.slice(2))}},{name:"$__try",fn:(e,r)=>(...r)=>{(0,C.QH)("$__try",r,1,2);let n=[];try{n=(0,H.ku)(e,r[0])}catch(s){if(s instanceof t.kb)throw s;n=1<r.length?K(e)(!0,!1,[["$error",(0,o.mW)(e,s)],["$parent",(0,o.mW)(e,(0,H.bR)(e))]],r[1]):null}return n}},{name:"$raise",fn:Y},{name:"$__if",fn:(e,r)=>(...r)=>{(0,C.QH)("$__if",r,2,3);const n=L(...r);let t=[];return t=oe(n)?(0,H.ku)(e,r[1]):2<r.length?(0,H.ku)(e,r[2]):null,t}},{name:"$__if-null",fn:(e,r)=>(...r)=>{(0,C.QH)("$__ifNull",r,2,2);const{car:n,cdr:t}=R(...r);let o=[];return o=me(n,null)?(0,H.ku)(e,t):n,o}},{name:"$__cond",fn:(e,r)=>(...r)=>{(0,C.QH)("$__cond",r,1);for(let n=0;n<r.length-1;n+=2){const t=r[n],o=r[n+1];if(oe((0,H.ku)(e,t)))return(0,H.ku)(e,o)}return null}},{name:"$__while",fn:(e,r)=>(...r)=>{(0,C.QH)("$__while",r,1);const n=L(...r),t=r.slice(1);let o=null;for(;oe((0,H.ku)(e,n));)for(const r of t)o=(0,H.ku)(e,r);return o}},{name:"$__do-while",fn:(e,r)=>(...r)=>{(0,C.QH)("$__doWhile",r,1);const n=L(...r),t=r.slice(1);let o=null;do{for(const r of t)o=(0,H.ku)(e,r)}while(oe((0,H.ku)(e,n)));return o}},{name:"$__until",fn:(e,r)=>(...r)=>{(0,C.QH)("$__until",r,1);const n=L(...r),t=r.slice(1);let o=null;for(;ae((0,H.ku)(e,n));)for(const r of t)o=(0,H.ku)(e,r);return o}},{name:"$__do-until",fn:(e,r)=>(...r)=>{(0,C.QH)("$__doUntil",r,1);const n=L(...r),t=r.slice(1);let o=null;do{for(const r of t)o=(0,H.ku)(e,r)}while(ae((0,H.ku)(e,n)));return o}},{name:"$__repeat",fn:(e,r)=>(...r)=>{(0,C.QH)("$__repeat",r,2);const n=(0,o.yk)(L(...r));if(!n)throw new Error("[SX] $__repeat: Invalid argument(s): item(s) of args[0] is not symbol.");(0,C.EZ)("$__repeat",{},n.symbol);const t=(0,H.Xw)(e,n,!1),s=(0,H.He)(D(...r)),a=r.slice(2);let i=null;for(let r=0;r<s;r++){t[n.symbol]=r;for(const r of a)i=(0,H.ku)(e,r)}return i}},{name:"$__for",fn:(e,r)=>(...r)=>{(0,C.QH)("$__for",r,2);const n=(0,o.yk)(L(...r));if(!n)throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[0] is not symbol.");(0,C.EZ)("$__for",{},n.symbol);const t=(0,H.Xw)(e,n,!1),s=D(...r);if(!Array.isArray(s))throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[1] is not array.");const a=r.slice(2);let i=null;for(const r of s){t[n.symbol]=r;for(const r of a)i=(0,H.ku)(e,r)}return i}},{name:"$pipe",fn:ee},{name:"$__get",fn:(e,r)=>(...r)=>{(0,C.QH)("$__get",r,1);let n=null,t=(0,o.yk)(r[0]);if(!t)switch(typeof r[0]){case"string":case"number":t={symbol:String(r[0])};break;default:n=(0,H.ku)(e,r[0])}if(t){const r=(0,H.Xw)(e,t,!0);if(!r)throw new Error(`[SX] $__get: Invalid argument(s): args[0]: symbol "${t.symbol}" is not defined.`);n=r[t.symbol]}for(let s=1;s<r.length;s++){let a=r[s],i=!0;for(;i;)switch(typeof a){case"function":n=a(n),i=!1;break;case"object":if(Array.isArray(a))a=(0,H.ku)(e,a);else if(t=(0,o.yk)(a),t)a=t.symbol;else{if(!Object.prototype.hasOwnProperty.call(a,"value"))throw new Error("[SX] $__get: Invalid argument(s): invalid name path.");a=(0,H.ku)(e,a)}break;case"number":a<0&&(a=n.length+a);case"string":(0,C.EZ)("$__get",n,a),n=n[a],i=!1;break;default:throw new Error("[SX] $__get: Invalid argument(s): invalid name path.")}}return n}},{name:"$__let",fn:re},{name:"$__set",fn:ne},{name:"$boolean",fn:te},{name:"$not",fn:se},{name:"$__and",fn:ie},{name:"$__or",fn:le},{name:"==",fn:ce},{name:"!=",fn:ue},{name:"<",fn:fe},{name:"<=",fn:pe},{name:">",fn:_e},{name:">=",fn:$e},{name:"$typeof",fn:ye},{name:"$symbol",fn:ge},{name:"$__gensym",fn:(e,r)=>(...r)=>{(0,C.QH)("$__gensym",r,0,1);const n={symbol:`$__tempvar__$$ec${e.evalCount++}$$__$gensym`};if(1===r.length){const t=(0,o.yk)(r[0]);if(t)re(e)(t,n);else{if("string"!=typeof r[0])throw new Error("[SX] $__gensym: Invalid argument(s): item(s) of args[0] is not symbol.");re(e)({symbol:r[0]},n)}}return n}},{name:"$is-symbol",fn:de},{name:"$is-null",fn:be},{name:"$is-nil",fn:he},{name:"$is-undefined",fn:ve},{name:"$is-list",fn:we},{name:"$is-string",fn:Se},{name:"$is-number",fn:ke},{name:"$is-NaN",fn:Ee},{name:"$is-finite",fn:Ae},{name:"$is-integer",fn:He},{name:"$to-string",fn:Ne},{name:"$to-number",fn:Ie},{name:"$__#",fn:(e,r)=>(...r)=>{const n={};for(const t of r){if(!(Array.isArray(t)&&0<t.length))throw new Error("[SX] $__toObject: Invalid argument(s): args[?] is not array.");{const r=(0,o.yk)(t[0]),s=r?r.symbol:String((0,H.ku)(e,t[0]));(0,C.EZ)("$__#",n,s),1===t.length?n[s]=!0:2===t.length?n[s]=(0,H.ku)(e,t[1]):n[s]=(0,H.ku)(e,[{symbol:e.config.reservedNames.list}].concat(t.slice(1)))}}return n}},{name:"$object-assign",fn:je},{name:"$json-stringify",fn:Oe},{name:"$now",fn:Xe},{name:"$datetime-from-iso",fn:xe},{name:"$datetime",fn:Ce},{name:"$datetime-lc",fn:Me},{name:"$datetime-to-iso-string",fn:Pe},{name:"$datetime-to-components",fn:We},{name:"$datetime-to-components-lc",fn:qe},{name:"$json-parse",fn:Te},{name:"$match",fn:Le},{name:"$console-log",fn:De},{name:"$console-error",fn:Ue},{name:"$console-trace",fn:Re},{name:"$console-time",fn:Be},{name:"$console-time-end",fn:Fe},{name:"$console-time-log",fn:ze}]),Ke=[{name:"$$__lambda",fn:G},{name:"$$__defun",fn:(e,r)=>(...r)=>{(0,C.QH)("$$__defun",r,3);const n=L(...r),t=G(e)(...r.slice(1));return(0,C.EZ)("$$__defun",e.funcMap,n.symbol),e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,r)=>t}),t}}],Ve=[].concat(Ze,Ke),Ge=[{name:"$scope",fn:(e,r)=>r=>[{symbol:"$__scope"},r[1],r[2],...r.slice(3).map((r=>(0,o.mW)(e,r)))]},{name:"$local",fn:(e,r)=>r=>[{symbol:"$__scope"},!0,!1,...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$global",fn:(e,r)=>r=>[{symbol:"$__global"},!1,...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$clisp-let",fn:(e,r)=>r=>[{symbol:"$__scope"},!0,!1,...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$capture",fn:(e,r)=>r=>[{symbol:"$__capture"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$closure",fn:(e,r)=>r=>{if(!(0,o.yk)(r[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},(0,o.mW)(e,r[3]),(0,o.mW)(e,[{symbol:"$__lambda"},(0,o.mW)(e,r[1]),...r.slice(4).map((r=>(0,o.mW)(e,r)))])]}},{name:"|->",fn:(e,r)=>e=>[{symbol:"$closure"},...e.slice(1)]},{name:"$lambda",fn:(e,r)=>r=>[{symbol:"$__lambda"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"->",fn:(e,r)=>r=>[{symbol:"$__lambda"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$defun",fn:(e,r)=>r=>[{symbol:"$__defun"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$refun",fn:(e,r)=>r=>[{symbol:"$__refun"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"<-",fn:(e,r)=>r=>[{symbol:"$__refun"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$defmacro",fn:(e,r)=>r=>[{symbol:"$__defmacro"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$call",fn:(e,r)=>r=>((0,C.QH)("$call",r,3),[{symbol:"$__call"},r[1],(0,o.mW)(e,r[2]),...r.slice(3)])},{name:"$try",fn:(e,r)=>r=>[{symbol:"$__try"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$if",fn:(e,r)=>r=>[{symbol:"$__if"},r[1],...r.slice(2).map((r=>(0,o.mW)(e,r)))]},{name:"$if-null",fn:(e,r)=>r=>[{symbol:"$__if-null"},r[1],...r.slice(2).map((r=>(0,o.mW)(e,r)))]},{name:"??",fn:(e,r)=>r=>[{symbol:"$__if-null"},r[1],...r.slice(2).map((r=>(0,o.mW)(e,r)))]},{name:"$cond",fn:(e,r)=>r=>[{symbol:"$__cond"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$while",fn:(e,r)=>r=>[{symbol:"$__while"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$do-while",fn:(e,r)=>r=>[{symbol:"$__do-while"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$until",fn:(e,r)=>r=>[{symbol:"$__until"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$do-until",fn:(e,r)=>r=>[{symbol:"$__do-until"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$repeat",fn:(e,r)=>r=>{if(!(0,o.yk)(r[2],"of"))throw new Error("[SX] $repeat: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__repeat"},(0,o.mW)(e,r[1]),r[3],...r.slice(4).map((r=>(0,o.mW)(e,r)))]}},{name:"$for",fn:(e,r)=>r=>{if(!(0,o.yk)(r[2],"of"))throw new Error("[SX] $for: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__for"},(0,o.mW)(e,r[1]),r[3],...r.slice(4).map((r=>(0,o.mW)(e,r)))]}},{name:"$get",fn:(e,r)=>r=>[{symbol:"$__get"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$let",fn:(e,r)=>r=>((0,C.QH)("$let",r,3,3),[{symbol:"$__let"},(0,o.mW)(e,r[1]),r[2]])},{name:"$clisp-defvar",fn:(e,r)=>r=>((0,C.QH)("$clisp-defvar",r,3,3),[{symbol:"$global"},[{symbol:"$__let"},(0,o.mW)(e,r[1]),r[2]]])},{name:"$set",fn:(e,r)=>r=>((0,C.QH)("$set",r,3,3),[{symbol:"$__set"},(0,o.mW)(e,r[1]),r[2]])},{name:"$clisp-setq",fn:(e,r)=>r=>((0,C.QH)("$clisp-setq",r,3,3),[{symbol:"$__set"},(0,o.mW)(e,r[1]),r[2]])},{name:"$and",fn:(e,r)=>r=>[{symbol:"$__and"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$or",fn:(e,r)=>r=>[{symbol:"$__or"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$gensym",fn:(e,r)=>r=>[{symbol:"$__gensym"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"#",fn:(e,r)=>r=>[{symbol:"$__#"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]}],Je=[{name:"$$closure",fn:(e,r)=>r=>{if(!(0,o.yk)(r[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},(0,o.mW)(e,r[3]),(0,o.mW)(e,[{symbol:"$$__lambda"},(0,o.mW)(e,r[1]),...r.slice(4).map((r=>(0,o.mW)(e,r)))])]}},{name:"|=>",fn:(e,r)=>e=>[{symbol:"$$closure"},...e.slice(1)]},{name:"$$lambda",fn:(e,r)=>r=>[{symbol:"$$__lambda"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"=>",fn:(e,r)=>r=>[{symbol:"$$__lambda"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]},{name:"$$defun",fn:(e,r)=>r=>[{symbol:"$$__defun"},...r.slice(1).map((r=>(0,o.mW)(e,r)))]}],Ye=[].concat(Ge,Je),er=[{name:"nil",fn:(e,r)=>[]},{name:"null",fn:(e,r)=>null},{name:"undefined",fn:(e,r)=>{}},{name:"true",fn:(e,r)=>!0},{name:"#true",fn:(e,r)=>!0},{name:"#t",fn:(e,r)=>!0},{name:"false",fn:(e,r)=>!1},{name:"#false",fn:(e,r)=>!1},{name:"#f",fn:(e,r)=>!1},{name:"#Number:Infinity",fn:(e,r)=>Number.POSITIVE_INFINITY},{name:"+Infinity",fn:(e,r)=>Number.POSITIVE_INFINITY},{name:"-Infinity",fn:(e,r)=>Number.NEGATIVE_INFINITY},{name:"#Number:Epsilon",fn:(e,r)=>Number.EPSILON},{name:"#Number:MaxValue",fn:(e,r)=>Number.MAX_VALUE},{name:"#Number:MinValue",fn:(e,r)=>Number.MIN_VALUE},{name:"#Number:MinSafeInteger",fn:(e,r)=>Number.MAX_SAFE_INTEGER},{name:"#Number:MinSafeInteger",fn:(e,r)=>Number.MIN_SAFE_INTEGER},{name:"NaN",fn:(e,r)=>Number.NaN}];function rr(e){return e.funcs=(e.funcs||[]).concat(Ze).concat(e.enableCompilationOperators?Ke:[]),e.macros=(e.macros||[]).concat(Ge).concat(e.enableCompilationOperators?Je:[]),e.symbols=(e.symbols||[]).concat(er),e}const nr=(e,r)=>(...e)=>{(0,C.QH)("$bitLShift",e,2,2);let{car:r,cdr:n}=R(...e);return r=(0,H.He)(r),n=(0,H.He)(n),0<=n?n<32?r<<n:0:n>-32?r>>>-n:0},tr=(nr(),(e,r)=>(...e)=>{(0,C.QH)("$bitSRShift",e,2,2);let{car:r,cdr:n}=R(...e);return r=(0,H.He)(r),n=(0,H.He)(n),0<=n?n<32?r>>n:2147483648&r?-1:0:n>-32?r<<-n:0}),or=(tr(),(e,r)=>(...e)=>{(0,C.QH)("$bitURShift",e,2,2);let{car:r,cdr:n}=R(...e);return r=(0,H.He)(r),n=(0,H.He)(n),0<=n?n<32?r>>>n:0:n>-32?r<<-n:0}),sr=(or(),(e,r)=>(...e)=>{(0,C.QH)("$bitNot",e,1,1);const r=L(...e);return~(0,H.He)(r)}),ar=(sr(),(e,r)=>(...e)=>{(0,C.QH)("$bitAnd",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>(0,H.He)(e)&(0,H.He)(r)),(0,H.He)(r))}),ir=(ar(),(e,r)=>(...e)=>{(0,C.QH)("$bitOr",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>(0,H.He)(e)|(0,H.He)(r)),(0,H.He)(r))}),lr=(ir(),(e,r)=>(...e)=>{(0,C.QH)("$bitXor",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>(0,H.He)(e)^(0,H.He)(r)),(0,H.He)(r))}),cr=(lr(),(e,r)=>(...e)=>((0,C.QH)("$add",e,1),e.reduce(((e,r)=>(0,H.He)(e)+(0,H.He)(r)),0))),mr=(cr(),(e,r)=>(...e)=>{(0,C.QH)("$sub",e,1);const r=L(...e);return 0===e.slice(1).length?-(0,H.He)(r):e.slice(1).reduce(((e,r)=>(0,H.He)(e)-(0,H.He)(r)),(0,H.He)(r))}),ur=(mr(),(e,r)=>(...e)=>{(0,C.QH)("$mul",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>(0,H.He)(e)*(0,H.He)(r)),(0,H.He)(r))}),fr=(ur(),(e,r)=>(...e)=>{(0,C.QH)("$sup",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>Math.pow((0,H.He)(e),(0,H.He)(r))),(0,H.He)(r))}),pr=(fr(),(e,r)=>(...e)=>{(0,C.QH)("$div",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>(0,H.He)(e)/(0,H.He)(r)),(0,H.He)(r))}),_r=(pr(),(e,r)=>(...e)=>{(0,C.QH)("$mod",e,2);const r=L(...e);return e.slice(1).reduce(((e,r)=>(0,H.He)(e)%(0,H.He)(r)),(0,H.He)(r))}),$r=(_r(),(e,r)=>(...e)=>Math.max(...e.map((e=>(0,H.He)(e))))),yr=($r(),(e,r)=>(...e)=>Math.min(...e.map((e=>(0,H.He)(e))))),gr=(yr(),(e,r)=>(...e)=>{const r=e.map((e=>(0,H.He)(e)));return r.length>0?r.reduce(((e,r)=>e+r),0)/r.length:NaN}),dr=(gr(),(e,r)=>(...e)=>((0,C.QH)("$floor",e,1,1),Math.floor((0,H.He)(L(...e))))),br=(dr(),(e,r)=>(...e)=>((0,C.QH)("$ceil",e,1,1),Math.ceil((0,H.He)(L(...e))))),hr=(br(),(e,r)=>(...e)=>((0,C.QH)("$round",e,1,1),Math.round((0,H.He)(L(...e))))),vr=(hr(),(e,r)=>(...e)=>((0,C.QH)("$abs",e,1,1),Math.abs((0,H.He)(L(...e))))),wr=(vr(),(e,r)=>(...e)=>((0,C.QH)("$sign",e,1,1),Math.sign((0,H.He)(L(...e))))),Sr=(wr(),[{name:"<<",fn:nr},{name:"$bit-l-shift",fn:nr},{name:">>",fn:tr},{name:"$bit-sr-shift",fn:tr},{name:">>>",fn:or},{name:"$bit-ur-shift",fn:or},{name:"$bit-not",fn:sr},{name:"$bit-and",fn:ar},{name:"$bit-or",fn:ir},{name:"$bit-xor",fn:lr},{name:"+",fn:cr},{name:"$add",fn:cr},{name:"$sum",fn:cr},{name:"-",fn:mr},{name:"$sub",fn:mr},{name:"$neg",fn:mr},{name:"*",fn:ur},{name:"$mul",fn:ur},{name:"**",fn:fr},{name:"$sup",fn:fr},{name:"/",fn:pr},{name:"$div",fn:pr},{name:"%",fn:_r},{name:"$mod",fn:_r},{name:"$max",fn:$r},{name:"$min",fn:yr},{name:"$avg",fn:gr},{name:"$floor",fn:dr},{name:"$ceil",fn:br},{name:"$round",fn:hr},{name:"$abs",fn:vr},{name:"$sign",fn:wr}]),kr=[{name:"$incl",fn:(e,r)=>e=>((0,C.QH)("$incl",e,2,2),[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],1]])},{name:"++",fn:(e,r)=>e=>((0,C.QH)("++",e,2,2),[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],1]])},{name:"$decl",fn:(e,r)=>e=>((0,C.QH)("$decl",e,2,2),[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],-1]])},{name:"--",fn:(e,r)=>e=>((0,C.QH)("--",e,2,2),[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],-1]])},{name:"$incln",fn:(e,r)=>e=>{if((0,C.QH)("$incln",e,3,3),"number"!=typeof e[2])throw new Error("[SX] $incln: Invalid parameter: arg(1) is not number.");return[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],e[2]]]}},{name:"+=",fn:(e,r)=>e=>{if((0,C.QH)("+=",e,3,3),"number"!=typeof e[2])throw new Error("[SX] +=: Invalid parameter: arg(1) is not number.");return[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],e[2]]]}},{name:"$decln",fn:(e,r)=>e=>{if((0,C.QH)("$decln",e,3,3),"number"!=typeof e[2])throw new Error("[SX] $decln: Invalid parameter: arg(1) is not number.");return[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],-e[2]]]}},{name:"-=",fn:(e,r)=>e=>{if((0,C.QH)("-=",e,3,3),"number"!=typeof e[2])throw new Error("[SX] -=: Invalid parameter: arg(1) is not number.");return[{symbol:"$set"},e[1],[{symbol:"$add"},e[1],-e[2]]]}}],Er=[];function Ar(e){return e.funcs=(e.funcs||[]).concat(Sr),e.macros=(e.macros||[]).concat(kr),e.symbols=(e.symbols||[]).concat(Er),e}class Hr{constructor(e){this.data=e}orderBy(e){let r;return r=Array.isArray(e)?(r,n)=>{for(const t of e)if("string"==typeof t){if(r[t]>n[t])return 1;if(r[t]<n[t])return-1}else{const e="desc"===t[1]?-1:1;if(r[t[0]]>n[t[0]])return 1*e;if(r[t[0]]<n[t[0]])return-1*e}return 0}:e,new Hr(this.data.slice(0).sort(r))}groupBy(e){let r;r=Array.isArray(e)?(r,n)=>{for(const t of e)if(r[t]!==n[t])return!1;return!0}:e;const n=[];let t=0,o=1;for(;o<this.data.length;o++)r(this.data[t],this.data[o],o,this.data)||(n.push(this.data.slice(t,o)),t=o);return n.push(this.data.slice(t,o)),new Hr(n)}groupEvery(e){if("number"==typeof e)return this.groupBy(((r,n,t,o)=>t%e!=0));{const r=Object.assign({first:e.intermediate,last:e.intermediate},e),n=this.groupBy(((e,n,t,o)=>r.single>=o.length?t%r.single!=0:t<=r.first?t%r.first!=0:(t-r.first)%r.intermediate!=0));return 1===n.data.length?r.single<n.data[0].length&&n.data.push([]):r.first<n.data[0].length&&n.data.unshift([]),n.data.length>1&&n.data[n.data.length-1].length>r.last&&n.data.push([]),n}}where(e){return new Hr(this.data.filter(e))}select(e){return e?this.data.map(e):this.data}}function Nr(e){return new Hr(e)}const Ir=(e,r)=>(...e)=>{(0,C.QH)("$length",e,1,1);const r=L(...e);switch(typeof r){case"object":if(!("length"in r))break;case"string":return r.length}throw new Error("[SX] $length: Invalid argument type: object has no property 'length'.")},Qr=(Ir(),(e,r)=>(...e)=>{(0,C.QH)("$trim",e,1,1);const r=L(...e);if("string"==typeof r)return r.trim();throw new Error("[SX] $trim: Invalid argument type: args[0] is not string.")}),jr=(Qr(),(e,r)=>(...e)=>{(0,C.QH)("$trimHead",e,1,1);const r=L(...e);if("string"==typeof r)return r.trimLeft();throw new Error("[SX] $trimHead: Invalid argument type: args[0] is not string.")}),Or=(jr(),(e,r)=>(...e)=>{(0,C.QH)("$trimTail",e,1,1);const r=L(...e);if("string"==typeof r)return r.trimRight();throw new Error("[SX] $trimTail: Invalid argument type: args[0] is not string.")}),Tr=(Or(),(e,r)=>(...e)=>{if((0,C.QH)("$replaceAll",e,3,3),"string"==typeof e[0]&&"string"==typeof e[1]&&"string"==typeof e[2])return e[0].split(e[1]).join(e[2]);throw new Error("[SX] $replaceAll: Invalid argument type: args[0] or [1] or [2] is not string.")}),Xr=(Tr(),(e,r)=>(...e)=>{if((0,C.QH)("$split",e,2,2),"string"==typeof e[0]&&"string"==typeof e[1])return e[0].split(e[1]);throw new Error("[SX] $split: Invalid argument type: args[0] or [1] is not string.")}),xr=(Xr(),(e,r)=>(...e)=>{if((0,C.QH)("$join",e,1,2),Array.isArray(e[0]),e.length>1){if("string"==typeof e[1])return e[0].join(e[1]);throw new Error("[SX] $join: Invalid argument type: args[1] is not string.")}return e[0].join()}),Cr=(xr(),(e,r)=>(...e)=>{(0,C.QH)("$concat",e,1);const r=L(...e);switch(typeof r){case"object":if(!("concat"in r))break;case"string":return r.concat(...e.slice(1))}throw new Error("[SX] $concat: Invalid argument type: object has no property 'concat'.")}),Mr=(Cr(),(e,r)=>(...e)=>{if((0,C.QH)("$slice",e,2,3),3===e.length&&("string"==typeof e[2]||Array.isArray(e[2])))return e[2].slice((0,H.He)(e[0]),(0,H.He)(e[1]));if(2===e.length&&("string"==typeof e[1]||Array.isArray(e[1])))return e[1].slice((0,H.He)(e[0]));throw new Error(`[SX] $slice: Invalid argument type: args[${e.length-1}] is not string or array.`)}),Pr=(Mr(),(e,r)=>(...e)=>{if((0,C.QH)("$top",e,2,2),"string"==typeof e[1]||Array.isArray(e[1]))return e[1].slice(0,(0,H.He)(e[0]));throw new Error("[SX] $top: Invalid argument type: args[1] is not string or array.")}),Wr=(Pr(),(e,r)=>(...e)=>{if((0,C.QH)("$tail",e,2,2),"string"==typeof e[1]||Array.isArray(e[1])){const r=-(0,H.He)(e[0]);return e[1].slice(r>=0||Number.isNaN(r)?e[1].length:r)}throw new Error("[SX] $tail: Invalid argument type: args[1] is not string or array.")}),qr=(Wr(),(e,r)=>(...e)=>((0,C.QH)("$push",e,2,2),Array.isArray(e[0]),e[0].push(e[1]),e[0])),Lr=(qr(),(e,r)=>(...e)=>((0,C.QH)("$pop",e,1,1),Array.isArray(e[0]),e[0].pop())),Dr=(Lr(),(e,r)=>(...e)=>{(0,C.QH)("$__at",e,2,2);const{car:r,cdr:n}=R(...e);return n[r]}),Ur=(Dr(),(e,r)=>(...e)=>{(0,C.QH)("$reverse",e,1,1);const r=L(...e);if(Array.isArray(r))return r.slice(0).reverse();throw new Error("[SX] $reverse: Invalid argument type: args[0] is not array.")}),Rr=(Ur(),(e,r)=>(...e)=>{(0,C.QH)("$reverse!",e,1,1);const r=L(...e);if(Array.isArray(r))return r.reverse();throw new Error("[SX] $reverse!: Invalid argument type: args[0] is not array.")}),Br=(Rr(),(e,r)=>(...e)=>{(0,C.QH)("$find",e,2,2);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return r.find(n);throw new Error("[SX] $find: Invalid argument type: args[0] is not array.")}),Fr=(Br(),(e,r)=>(...e)=>{(0,C.QH)("$filter",e,2,2);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return r.filter(n);throw new Error("[SX] $filter: Invalid argument type: args[0] is not array.")}),zr=(Fr(),(e,r)=>(...e)=>{(0,C.QH)("$map",e,2,2);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return r.map(n);throw new Error("[SX] $map: Invalid argument type: args[0] is not array.")}),Zr=(zr(),(e,r)=>(...e)=>{(0,C.QH)("$reduce",e,2,3);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return e.length<3?r.reduce(n):r.reduce(n,e[2]);throw new Error("[SX] $reduce: Invalid argument type: args[0] is not array.")}),Kr=(Zr(),(e,r)=>(...e)=>{(0,C.QH)("$reduceFromTail",e,2,3);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return e.length<3?r.reduceRight(n):r.reduceRight(n,e[2]);throw new Error("[SX] $reduceFromTail: Invalid argument type: args[0] is not array.")}),Vr=(Kr(),(e,r)=>(...e)=>{(0,C.QH)("$sort",e,2,2);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return r.slice(0).sort(n);throw new Error("[SX] $sort: Invalid argument type: args[0] is not array.")}),Gr=(Vr(),(e,r)=>(...e)=>{(0,C.QH)("$sort!",e,2,2);const{car:r,cdr:n}=R(...e);if(Array.isArray(r))return r.sort(n);throw new Error("[SX] $sort!: Invalid argument type: args[0] is not array.")}),Jr=(Gr(),(e,r)=>(...e)=>{(0,C.QH)("$group-every",e,2,2);const{car:r,cdr:n}=R(...e);if(!Array.isArray(n))throw new Error("[SX] $group-every: Invalid argument type: args[1] is not array.");return Nr(n).groupEvery(r).select()}),Yr=(Jr(),(e,r)=>(...e)=>{(0,C.QH)("$group-by",e,2,2);const{car:r,cdr:n}=R(...e);if(!Array.isArray(n))throw new Error("[SX] $group-by: Invalid argument type: args[1] is not array.");return Nr(n).groupBy(r).select()}),en=(Yr(),(e,r)=>(...e)=>{(0,C.QH)("$order-by",e,2,2);const{car:r,cdr:n}=R(...e);if(!Array.isArray(n))throw new Error("[SX] $order-by: Invalid argument type: args[1] is not array.");return Nr(n).orderBy(r).select()}),rn=(en(),(e,r)=>(...e)=>{(0,C.QH)("$where",e,2,2);const{car:r,cdr:n}=R(...e);if("function"!=typeof e[0])throw new Error("[SX] $where: Invalid argument type: args[0] is not function.");if(!Array.isArray(n))throw new Error("[SX] $where: Invalid argument type: args[1] is not array.");return Nr(n).where(r).select()}),nn=(rn(),[{name:"$range",fn:(e,r)=>(...r)=>{(0,C.QH)("$range",r,2,3);const{car:n,cdr:t}=R(...r),o=(0,H.He)(n)||0,s=(0,H.He)(t)||0,a=r.length>2&&(0,H.He)(r[2])||(o<=s?1:-1),i=Math.sign(s-o)+Math.sign(a)!==0?Math.floor(Math.abs(s-o)/Math.abs(a))+1:0;return e.evalCount+=i,(0,H.ku)(e,0),Array.from({length:i},((e,r)=>o+r*a))}},{name:"$length",fn:Ir},{name:"$trim",fn:Qr},{name:"$trim-head",fn:jr},{name:"$trim-tail",fn:Or},{name:"$replace-all",fn:Tr},{name:"$split",fn:Xr},{name:"$join",fn:xr},{name:"$concat",fn:Cr},{name:"$slice",fn:Mr},{name:"$top",fn:Pr},{name:"$tail",fn:Wr},{name:"$push",fn:qr},{name:"$pop",fn:Lr},{name:"$__at",fn:Dr},{name:"$reverse",fn:Ur},{name:"$reverse!",fn:Rr},{name:"$find",fn:Br},{name:"$filter",fn:Fr},{name:"$map",fn:zr},{name:"$reduce",fn:Zr},{name:"$reduce-from-head",fn:Zr},{name:"$reduce-from-tail",fn:Kr},{name:"$sort",fn:Vr},{name:"$sort!",fn:Gr},{name:"$group-every",fn:Jr},{name:"$group-by",fn:Yr},{name:"$order-by",fn:en},{name:"$where",fn:rn}]),tn=[{name:"$[",fn:(e,r)=>e=>{if(!(0,o.yk)(e[2],"]"))throw new Error("[SX] $repeat: Invalid syntax: missing ']' keyword.");return[{symbol:"$__at"},e[1],e[3]]}}],on=[];function sn(e){return e.funcs=(e.funcs||[]).concat(nn),e.macros=(e.macros||[]).concat(tn),e.symbols=(e.symbols||[]).concat(on),e}const an=(e,r)=>(...r)=>{(0,C.QH)("$__letAsync",r,2,2);let n=r[1];return"object"==typeof n&&"function"==typeof n.then||(n=Promise.resolve(n)),n=n.then((n=>{try{return re(e)(r[0],n),n}catch(e){return Promise.reject(e)}})),n},ln=(an(null),(e,r)=>(...r)=>{(0,C.QH)("$__setAsync",r,2,2);let n=r[1];return"object"==typeof n&&"function"==typeof n.then||(n=Promise.resolve(n)),n=n.then((n=>{try{return ne(e)(r[0],n),n}catch(e){return Promise.reject(e)}})),n}),cn=(ln(null),(e,r)=>(...e)=>{(0,C.QH)("$then",e,2,3);let r=e[0];if("object"==typeof r&&"function"==typeof r.then||(r=Promise.resolve(r)),"function"==typeof e[2])r=r.then(e[1],e[2]);else{if("function"!=typeof e[1])throw new Error("[SX] $then: Invalid argument(s): args[1] is not function.");r=r.then(e[1])}return r}),mn=(cn(),(e,r)=>(...e)=>{const r=e.slice(0);for(let e=0;e<r.length;e++)"object"==typeof r[e]&&"function"==typeof r[e].then||(r[e]=Promise.resolve(r[e]));return Promise.all(r)}),un=(mn(),(e,r)=>(...e)=>{const r=e.slice(0);for(let e=0;e<r.length;e++)"object"==typeof r[e]&&"function"==typeof r[e].then||(r[e]=Promise.resolve(r[e]));const n=e=>new Promise(((r,n)=>e.then(n,r)));return t=r,n(Promise.all(t.map(n)));var t}),fn=(un(),(e,r)=>(...e)=>{(0,C.QH)("$resolvePipe",e,1);let r=e[0];"object"==typeof r&&"function"==typeof r.then||(r=Promise.resolve(r));const n=e.slice(1);for(let e=0;e<n.length;e++)if("function"!=typeof n[e]){const r=n[e];n[e]=()=>r}let t=r;for(const e of n)t=t.then(e);return t}),pn=(fn(),(e,r)=>(...e)=>{(0,C.QH)("$resolveFork",e,1);let r=e[0];"object"==typeof r&&"function"==typeof r.then||(r=Promise.resolve(r));const n=e.slice(1);for(let e=0;e<n.length;e++)if("function"!=typeof n[e]){const r=n[e];n[e]=()=>r}const t=new Array(n.length),o=new Array(n.length),s=[];for(let e=0;e<n.length;e++)s.push(new Promise(((r,s)=>{t[e]=t=>{let o=n[e](t);"object"==typeof o&&"function"==typeof o.then||(o=Promise.resolve(o)),o.then((e=>r(e))).catch((e=>s(e)))},o[e]=s})));return r.then((e=>t.forEach((r=>r(e)))),(e=>o.forEach((r=>r(e))))),s}),_n=(pn(),[{name:"$__let-async",fn:an},{name:"$__set-async",fn:ln},{name:"$then",fn:cn},{name:"$resolve-all",fn:mn},{name:"$resolve-any",fn:un},{name:"$resolve-pipe",fn},{name:"$resolve-fork",fn:pn}]),$n=[{name:"$let-async",fn:(e,r)=>r=>((0,C.QH)("$let-async",r,3,3),[{symbol:"$__let-async"},(0,o.mW)(e,r[1]),r[2]])},{name:"$set-async",fn:(e,r)=>r=>((0,C.QH)("$set-async",r,3,3),[{symbol:"$__set-async"},(0,o.mW)(e,r[1]),r[2]])}],yn=[];function gn(e){return e.funcs=(e.funcs||[]).concat(_n),e.macros=(e.macros||[]).concat($n),e.symbols=(e.symbols||[]).concat(yn),e}const dn=(()=>{let e=Object.assign({},a);return e.reservedNames=Object.assign({},e.reservedNames,{Template:"$concat"}),e=rr(e),e=Ar(e),e=sn(e),e=gn(e),e.stripComments=!0,j(e)})(),bn=dn,hn=dn,vn=(()=>{let e=Object.assign({},a);return e.reservedNames=Object.assign({},e.reservedNames,{Template:"$concat"}),e=rr(e),e=Ar(e),e=sn(e),e=gn(e),e.stripComments=!0,O(e)})(),wn=vn,Sn=vn,kn=(()=>{let e=Object.assign({},a);return e.reservedNames=Object.assign({},e.reservedNames,{Template:"$concat"}),e=rr(e),e=Ar(e),e=sn(e),e=gn(e),e.stripComments=!0,e.returnMultipleRoot=!0,j(e)})(),En=(()=>{let e=Object.assign({},a);return e.reservedNames=Object.assign({},e.reservedNames,{Template:"$concat"}),e=rr(e),e=Ar(e),e=sn(e),e=gn(e),e.stripComments=!0,e.returnMultipleRoot=!0,O(e)})();function An(e,...r){let n=r,t={};return 0<r.length&&Array.isArray(r[0])&&(0,o.yk)(r[0][0],"@")&&(t=((e,r)=>(...r)=>{const n={};for(const t of r){if(!(Array.isArray(t)&&0<t.length))throw new Error("[SX] $jsxProps: Invalid argument(s): args[?] is not array.");{const r=(0,o.yk)(t[0]),s=r?r.symbol:String((0,H.ku)(e,t[0]));switch(s){case"style":if(1===t.length)n[s]="";else if(t.length>=2){const r={};for(const n of t.slice(1))if(Array.isArray(n)&&1<n.length){const t=String((0,H.ku)(e,n[0]));(0,C.EZ)("$jsxProps",r,t),r[t]=String((0,H.ku)(e,n[1]))}else if("string"==typeof n)for(const e of n.split(";")){const n=/^\s*(\S+)\s*:\s*(.*?)\s*$/.exec(e);n&&((0,C.EZ)("$jsxProps",r,n[1]),r[n[1]]=n[2])}n[s]=r}break;case"class":case"styleClass":if(1===t.length)n[s]=[];else if(t.length>=2){let r=[];for(const n of t.slice(1))Array.isArray(n)?r=r.concat(n.map((r=>(0,H.ku)(e,r)))):"string"==typeof n&&(r=r.concat(n.split(" ")));const o=[],a=e=>e.forEach((e=>null==e?void 0:Array.isArray(e)?a(e):o.push(String(e))));a(r),n[s]=o}break;case"className":if(1===t.length)n[s]="";else if(t.length>=2){let r="";for(const n of t.slice(1)){let t="";if(Array.isArray(n)){const r=[],o=n=>n.map((r=>(0,H.ku)(e,r))).forEach((e=>null==e?void 0:Array.isArray(e)?o(e):r.push(String(e))));o(n),t=r.join(" ")}else"string"==typeof n&&(t=n);0<r.length?r+=" "+t:r=t}n[s]=r}break;case"dangerouslySetInnerHTML":1===t.length?n[s]={__html:""}:t.length>=2?n[s]={__html:(0,H.ku)(e,t[1])}:n[s]={__html:(0,H.ku)(e,[{symbol:e.config.reservedNames.list}].concat(t.slice(1)))};break;case"setInnerText":1===t.length?n[s]={__text:""}:t.length>=2?n[s]={__text:(0,H.ku)(e,t[1])}:n[s]={__text:(0,H.ku)(e,[{symbol:e.config.reservedNames.list}].concat(t.slice(1)))};break;default:(0,C.EZ)("$jsxProps",n,s),1===t.length?n[s]=!0:2===t.length?n[s]=(0,H.ku)(e,t[1]):n[s]=(0,H.ku)(e,[{symbol:e.config.reservedNames.list}].concat(t.slice(1)))}}}return n})(e)(...r[0].slice(1)),n=n.slice(1)),{props:t,children:n}}const Hn=(e,r)=>(...n)=>{const{props:t,children:o}=An(e,...n);return e.config.jsx(r,t,...o)},Nn=e=>(r,n)=>(...n)=>{const{props:t,children:o}=An(r,...n);return r.config.jsx(e,t,...o)},In=[{name:"$=__if",fn:(e,r)=>(...r)=>{(0,C.QH)("$__outputIf",r,2);const{car:n,cdr:t}=R(...r);let o=[];return oe(n)&&(2<r.length?(o.push({symbol:e.config.reservedNames.Template},...r.slice(1)),o=(0,H.ku)(e,o)):o=(0,H.ku)(e,t)),o}},{name:"$=__for",fn:(e,r)=>(...r)=>{(0,C.QH)("$__outputForOf",r,2);const n=L(...r),t=[];if(!Array.isArray(n))throw new Error("[SX] $__outputForOf: Invalid argument(s): args[0] is not array.");for(let s=0;s<n.length;s++){const a=n[s],i=K(e)(!0,!0,[["$data",(0,o.mW)(e,a)],["$index",s],["$array",(0,o.mW)(e,n)],["$parent",(0,o.mW)(e,(0,H.bR)(e).scope)]],...r.slice(1));2<r.length&&Array.isArray(i)?t.push(...i):t.push(i)}return(0,H.ku)(e,[{symbol:e.config.reservedNames.Template}].concat(t.map((r=>[{symbol:e.config.reservedNames.quote},r]))))}}],Qn=In,jn=[{name:"@",fn:(e,r)=>r=>(0,o.mW)(e,r)},{name:"$=if",fn:(e,r)=>r=>[{symbol:"$=__if"},r[1],...r.slice(2).map((r=>(0,o.mW)(e,r)))]},{name:"$=for",fn:(e,r)=>r=>[{symbol:"$=__for"},r[1],...r.slice(2).map((r=>(0,o.mW)(e,r)))]}],On=jn,Tn=[];function Xn(e,r){e.funcs=(e.funcs||[]).concat(Qn),e.macros=(e.macros||[]).concat(On),e.symbols=(e.symbols||[]).concat(Tn);const n=Object.entries(r.components).map((e=>({name:e[0],fn:Nn(e[1])})));return e.funcs=e.funcs.concat({name:e.reservedNames.Template,fn:Nn(r.jsxFlagment)},...n),e.funcSymbolResolverFallback=Hn,e.jsx=r.jsx,e.JsxFragment=r.jsxFlagment,e}function xn(e){let r=Object.assign({},a);return r=rr(r),r=Ar(r),r=sn(r),r=gn(r),r=Xn(r,e),r.stripComments=!0,j(r)}function Cn(e){let r=Object.assign({},a);return r=rr(r),r=Ar(r),r=sn(r),r=gn(r),r=Xn(r,e),r.stripComments=!0,O(r)}function Mn(e,r,n="text/lisp"){const t=document.querySelectorAll(`script[type="${n}"]`),o=[];for(let e=0;e<t.length;e++)o.push(t[e].innerHTML);return(e=e.appendGlobals(r||{}))(o.join("\n"))}const Pn={core:Ve,arithmetic:Sr,sequence:nn,jsx:In,concurrent:_n},Wn={core:Ye,arithmetic:kr,sequence:tn,jsx:jn,concurrent:$n},qn={core:er,arithmetic:Er,sequence:on,jsx:Tn,concurrent:yn}},788:(e,r,n)=>{function t(e,r){return[{symbol:e.config.reservedNames.quote},r]}function o(e,r){if(Array.isArray(r)&&0<r.length){const n=u(r);if(n&&n.symbol===e.config.reservedNames.quote)return!0}return!1}function s(e,r){return[{symbol:e.config.reservedNames.backquote},r]}function a(e,r){if(Array.isArray(r)&&0<r.length){const n=u(r);if(n&&n.symbol===e.config.reservedNames.backquote)return!0}return!1}function i(e,r){return[{symbol:e.config.reservedNames.unquote},r]}function l(e,r){if(Array.isArray(r)&&0<r.length){const n=u(r);if(n&&n.symbol===e.config.reservedNames.unquote)return!0}return!1}function c(e,r){return[{symbol:e.config.reservedNames.spread},r]}function m(e,r){return[{symbol:e.config.reservedNames.splice},r]}function u(e,r){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"symbol")?void 0!==r?e.symbol===r?e:null:e:null}n.d(r,{mW:()=>t,sg:()=>o,zz:()=>s,zB:()=>a,rL:()=>i,sV:()=>l,hw:()=>c,db:()=>m,yk:()=>u})},514:(e,r,n)=>{n.d(r,{gG:()=>a,nr:()=>i,zp:()=>l,Wf:()=>c,IQ:()=>m,bd:()=>u});var t=n(788),o=n(759),s=n(69);function a(e,r){let n=r;for(;Array.isArray(n);){{if(0===n.length)break;n=(0,o.ym)(e,n);const r=(0,t.yk)(n[0]);if(!r)break;{const t=(0,o.Ri)(e,r,n);if(!t)break;n=t.fn(t.actualArgs)}}(0,s.yT)(e)}return n}function i(e,r){if(!Array.isArray(r)||!(0,t.yk)(r[0],e.config.reservedNames.quote))throw new Error("[SX] stripQuote: token is not quoted.");return r[1]}function l(e,r){return Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.quote)?r[1]:r}function c(e){return function(){return(0,o.bR)(e)}}function m(e,r){return(0,s.JU)("(compiler)resolveValueSymbol_dynamic",r),function(){return(0,o.Z_)(e,{symbol:r})}}function u(e){return function(r){return(0,s.JU)(e,r)}}},368:(e,r,n)=>{n.d(r,{A:()=>a});var t=n(788),o=n(69),s=n(514);function a(e,r){const{_$_vars:n,ops:a,makeScope:i,compileToken:l}=r;a.set(e.config.reservedNames.quote,(function(e,t){let o="";return n[r.varsCount]=e[1],o+=`(_$_vars[${String(r.varsCount++)}])`,o})),a.set(e.config.reservedNames.self,(function(r,n){let t="";return t+=`((_$_vars[0])(${n.map((r=>l([(0,s.zp)(e,r)],0))).join(",")}))`,t})),a.set("$__if",(function(r,n){let t="";return(0,o.QH)("compileToken:$__if",n,2,3),t+=`(${l(r,1)}?(${l([(0,s.nr)(e,r[2])],0)}):(${l([(0,s.nr)(e,r[3])],0)}))`,t})),a.set("$__if-null",(function(r,n){let t="";return(0,o.QH)("compileToken:$__if-null",n,2,2),t+=`((()=>{let _$_rv=${l(r,1)};return _$_rv?_$_rv:(${l([(0,s.nr)(e,r[2])],0)}});})())`,t})),a.set("$__cond",(function(r,n){let t="";(0,o.QH)("compileToken:$__cond",n,1),t+="(";for(let r=0;r<n.length;r+=2)t+=`${l([(0,s.nr)(e,n[r])],0)}?(${l([(0,s.nr)(e,n[r+1])],0)}):(`;t+="null";for(let e=0;e<n.length;e+=2)t+=")";return t+=")",t})),a.set("$__while",(function(r,n){let t="";return(0,o.QH)("compileToken:$__while",n,1),t+=`((()=>{let _$_rv=null;while(${l([(0,s.nr)(e,r[1])],0)}){_$_rv=${r.slice(2).map((r=>l([(0,s.nr)(e,r)],0))).join(",")}}return _$_rv})())`,t})),a.set("$__do-while",(function(r,n){let t="";return(0,o.QH)("compileToken:$__do-until",n,1),t+=`((()=>{let _$_rv=null;do{_$_rv=${r.slice(2).map((r=>l([(0,s.nr)(e,r)],0))).join(",")}}}while(${l([(0,s.nr)(e,r[1])],0)})return _$_rv)())`,t})),a.set("$__until",(function(r,n){let t="";return(0,o.QH)("compileToken:$__until",n,1),t+=`((()=>{let _$_rv=null;while(!${l([(0,s.nr)(e,r[1])],0)}){_$_rv=${r.slice(2).map((r=>l([(0,s.nr)(e,r)],0))).join(",")}}return _$_rv})())`,t})),a.set("$__do-until",(function(r,n){let t="";return(0,o.QH)("compileToken:$__do-until",n,1),t+=`((()=>{let _$_rv=null;do{_$_rv=${r.slice(2).map((r=>l([(0,s.nr)(e,r)],0))).join(",")}}}while(!${l([(0,s.nr)(e,r[1])],0)})return _$_rv)())`,t})),a.set("$__repeat",(function(n,a){let c="";if((0,o.QH)("compileToken:$__repeat",a,2),!(0,t.yk)(a[0]))throw new Error("[SX] compileToken: $__repeat : args[0] is not symbol.");return i((()=>{const t="v"+r.varNamesCount++;r.varNames.set(a[0].symbol,t),c+=`(((_$_n)=>{let _$_rv=null;for(let ${t}=0;${t}<_$_n;${t}++){_$_rv=${n.slice(2).map((r=>l([(0,s.nr)(e,r)],0))).join(",")}}return _$_rv})(${l(a,1)}))`})),c})),a.set("$__for",(function(n,a){let c="";if((0,o.QH)("compileToken:$__for",a,2),!(0,t.yk)(a[0]))throw new Error("[SX] compileToken: $__for : args[0] is not symbol.");return i((()=>{const t="v"+r.varNamesCount++;r.varNames.set(a[0].symbol,t),c+=`(((_$_l)=>{let _$_rv=null;for(const ${t} of _$_l){_$_rv=${n.slice(2).map((r=>l([(0,s.nr)(e,r)],0))).join(",")}}return _$_rv})(${l(a,1)}))`})),c})),a.set("$__scope",(function(n,a){let c="";if((0,o.QH)("compileToken:$__scope",a,2),!Array.isArray(n[3]))throw new Error("[SX] compileToken: $__scope : args[2] is not array.");return i((()=>{for(const o of(0,s.nr)(e,n[3])){let e="";if(Array.isArray(o)){if(o.length<1)throw new Error("[SX] compileToken: $__scope : args[0][?] is too short.");if(!(0,t.yk)(o[0]))throw new Error("[SX] compileToken: $__scope : args[0][?][0] is not symbol.");e=o[0].symbol,c+=`(${"v"+r.varNamesCount}=${l(o,1)})`}else{if(!(0,t.yk)(o))throw new Error("[SX] compileToken: $__scope : args[0][?] is not symbol.");e=o.symbol}r.varDefs+=`var v${r.varNamesCount}=void 0;`,r.varNames.set(e,"v"+r.varNamesCount++)}const o=""+n.slice(4).map((r=>l([(0,s.nr)(e,r)],0))).join(",");c+=n[2]?`[${o}]`:`(${o})`})),c})),a.set("$__try",(function(t,a){let c="";return(0,o.QH)("compileToken:$__try",a,1,2),c+=`((()=>{try{${l([(0,s.nr)(e,t[1])],0)}}catch(e${r.varNamesCount}){let e${r.varNamesCount+1}=(_$_vars[${String(r.varsCount)}])();`,n[r.varsCount++]=(0,s.Wf)(e),i((()=>{r.varNames.set("$error","e"+r.varNamesCount++),r.varNames.set("$parent","e"+r.varNamesCount++),c+=l([(0,s.nr)(e,t[2])],0)+"}})())"})),c})),a.set(e.config.reservedNames.raise,(function(r,n){let t="";return t+=`((()=>{throw ${l([(0,s.zp)(e,r[1])],0)}})())`,t})),a.set("$boolean",(function(e,r){let n="";return(0,o.QH)("compileToken:$boolean",r,1,1),n+=`((x0=${l(r,0)}),(Array.isArray(x0)&&x0.length===0?false:boolean(x0)))`,n})),a.set("$__get",(function(a,i){let c="";(0,o.QH)("compileToken:$__get",i,1);const m=(0,s.nr)(e,a[1]),u=(0,t.yk)(m)?m.symbol:"string"==typeof m?m:null;if("string"!=typeof u)throw new Error(`[SX] compileToken: $__get : operand is not symbol: ${JSON.stringify(a[1])}.`);let f="";return r.varNames.has(u)?f=r.varNames.get(u):(n[r.varsCount]=(0,s.IQ)(e,u),f=`_$_vars[${String(r.varsCount++)}]`),c+=`((${f})${a.slice(2).map(((e,o,s)=>{return`[${(0,t.yk)(s[o])?(a=s[o].symbol,n[r.varsCount]=a,`_$_vars[${String(r.varsCount++)}]`):l(s,o)}]`;var a})).join("")})`,c})),a.set("$__let",(function(n,a){let i="";(0,o.QH)("compileToken:$__let",a,2,2);const c=(0,s.nr)(e,n[1]),m=(0,t.yk)(c)?c.symbol:"string"==typeof c?c:null;if("string"!=typeof m)throw new Error(`[SX] compileToken: $__let : operand is not rvalue: ${JSON.stringify(n[1])}.`);return r.varNames.has(m)||(r.varDefs+=`var v${r.varNamesCount}=void 0;`,r.varNames.set(m,"v"+r.varNamesCount++)),i+=`(${r.varNames.get(m)}=${l(n,2)})`,i})),a.set("$__set",(function(a,i){let c="";(0,o.QH)("compileToken:$__set",i,2);const m=(0,s.nr)(e,a[1]),u=(0,t.yk)(m)?m.symbol:"string"==typeof m?m:Array.isArray(m)?(0,t.yk)(m[0])?m[0].symbol:"string"==typeof m[0]?m[0]:null:null;if("string"!=typeof u)throw new Error(`[SX] compileToken: $__set : operand is not rvalue: ${JSON.stringify(a[1])}.`);let f="";r.varNames.has(u)?f=r.varNames.get(u):(n[r.varsCount]=(0,s.IQ)(e,u),f=`_$_vars[${String(r.varsCount++)}]`);let p=!1,_="";return c+=`((${f})${(Array.isArray(m)?m.slice(1):[]).map(((e,a,i)=>{return`[${(0,t.yk)(i[a])?(m=i[a].symbol,n[r.varsCount]=(0,o.JU)("compileToken:$__set",m),`_$_vars[${String(r.varsCount++)}]`):(c=l(i,a),p||(n[r.varsCount]=(0,s.bd)("compileToken:$__set"),_=String(r.varsCount++),p=!0),`(_$_vars[${_}](${c}))`)}]`;var c,m})).join("")}=${l(a,2)})`,c})),a.set(e.config.reservedNames.not,(function(e,r){let n="";return(0,o.QH)("compileToken:$not",r,1,1),n+=`(!${l(r,0)})`,n})),a.set("$__and",(function(r,n){let t="";return(0,o.QH)("compileToken:$__and",n,1),t+=`(${n.map((r=>l([(0,s.nr)(e,r)],0))).join("&&")})`,t})),a.set("$__or",(function(r,n){let t="";return(0,o.QH)("compileToken:$__or",n,1),t+=`(${n.map((r=>l([(0,s.nr)(e,r)],0))).join("||")})`,t})),a.set("===",(function(e,r){let n="";return(0,o.QH)("compileToken:===",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("===")})`,n})),a.set("!==",(function(e,r){let n="";return(0,o.QH)("compileToken:!==",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("!==")})`,n})),a.set("==",(function(e,r){let n="";return(0,o.QH)("compileToken:==",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("==")})`,n})),a.set("!=",(function(e,r){let n="";return(0,o.QH)("compileToken:!=",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("!=")})`,n})),a.set("<",(function(e,r){let n="";return(0,o.QH)("compileToken:<",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("<")})`,n})),a.set("<=",(function(e,r){let n="";return(0,o.QH)("compileToken:<=",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("<=")})`,n})),a.set(">",(function(e,r){let n="";return(0,o.QH)("compileToken:>",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join(">")})`,n})),a.set(">=",(function(e,r){let n="";return(0,o.QH)("compileToken:<=",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join(">=")})`,n})),a.set("$concat",(function(r,n){let s="";(0,o.QH)("compileToken:$concat",n,1);let a="";if(Array.isArray(n[0])&&(0,t.yk)(n[0][0],e.config.reservedNames.spread)){const e=l(n[0],1);a=`(${e}[0]).concat((${e}.length>1?${e}[1]:(typeof ${e}[0]==='string'?'':[])),`}else a=l(n,0)+".concat(";return s+=`(${a}${n.slice(1).map(((e,r,n)=>l(n,r))).join(",")}))`,s})),a.set("+",(function(r,n){let s="";(0,o.QH)("compileToken:+",n,1);let a=!1;return n.map(((r,n,o)=>{Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.spread)&&(a=!0)})),s+=a?`((()=>{let _$_rv=[];${n.map(((e,r,n)=>`_$_rv.push(${l(n,r)})`)).join(";")};return _$_rv.reduce((x,y)=>x+y);})())`:`(${n.map(((e,r,n)=>l(n,r))).join("+")})`,s})),a.set("-",(function(r,n){let s="";(0,o.QH)("compileToken:-",n,1);let a=!1;return n.map(((r,n,o)=>{Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.spread)&&(a=!0)})),s+=a?`((()=>{let _$_rv=[];${n.map(((e,r,n)=>`_$_rv.push(${l(n,r)})`)).join(";")};return (_$_rv.length>1?(_$_rv.reduce((x,y)=>x-y)):(_$_rv.length>0?-_$_rv[0]:NaN));})())`:`(${r.length>2?n.map(((e,r,n)=>l(n,r))).join("-"):`-(${String(l(r,1))})`})`,s})),a.set("*",(function(r,n){let s="";(0,o.QH)("compileToken:*",n,2);let a=!1;return n.map(((r,n,o)=>{Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.spread)&&(a=!0)})),s+=a?`((()=>{let _$_rv=[];${n.map(((e,r,n)=>`_$_rv.push(${l(n,r)})`)).join(";")};return _$_rv.reduce((x,y)=>x*y);})())`:`(${n.map(((e,r,n)=>l(n,r))).join("*")})`,s})),a.set("**",(function(r,n){let s="";(0,o.QH)("compileToken:**",n,2);let a=!1;return n.map(((r,n,o)=>{Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.spread)&&(a=!0)})),s+=a?`((()=>{let _$_rv=[];${n.map(((e,r,n)=>`_$_rv.push(${l(n,r)})`)).join(";")};return _$_rv.reduce((x,y)=>x**y);})())`:`(${n.map(((e,r,n)=>l(n,r))).join("**")})`,s})),a.set("/",(function(r,n){let s="";(0,o.QH)("compileToken:/",n,2);let a=!1;return n.map(((r,n,o)=>{Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.spread)&&(a=!0)})),s+=a?`((()=>{let _$_rv=[];${n.map(((e,r,n)=>`_$_rv.push(${l(n,r)})`)).join(";")};return _$_rv.reduce((x,y)=>x/y);})())`:`(${n.map(((e,r,n)=>l(n,r))).join("/")})`,s})),a.set("%",(function(r,n){let s="";(0,o.QH)("compileToken:%",n,2);let a=!1;return n.map(((r,n,o)=>{Array.isArray(r)&&(0,t.yk)(r[0],e.config.reservedNames.spread)&&(a=!0)})),s+=a?`((()=>{let _$_rv=[];${n.map(((e,r,n)=>`_$_rv.push(${l(n,r)})`)).join(";")};return _$_rv.reduce((x,y)=>x%y);})())`:`(${n.map(((e,r,n)=>l(n,r))).join("%")})`,s})),a.set("<<",(function(e,r){let n="";return(0,o.QH)("compileToken:<<",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("<<")})`,n})),a.set(">>",(function(e,r){let n="";return(0,o.QH)("compileToken:>>",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join(">>")})`,n})),a.set(">>>",(function(e,r){let n="";return(0,o.QH)("compileToken:>>>",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join(">>>")})`,n})),a.set("$bit-not",(function(e,r){let n="";return(0,o.QH)("compileToken:$bit-not",r,1,1),n+=`(~(${l(e,1)}))`,n})),a.set("$bit-and",(function(e,r){let n="";return(0,o.QH)("compileToken:$bit-and",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("&")})`,n})),a.set("$bit-or",(function(e,r){let n="";return(0,o.QH)("compileToken:$bit-or",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("|")})`,n})),a.set("$bit-xor",(function(e,r){let n="";return(0,o.QH)("compileToken:$bit-xor",r,2,2),n+=`(${r.map(((e,r,n)=>l(n,r))).join("^")})`,n}))}},877:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>compileLambda});var _ast__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(788),_evaluate__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(759),_errors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(69),_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(514),_compile_ops__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(368);function compileCore(e,r,n,t,o){function s(e){let r="";if(null===e)r+="(null)";else if(void 0===e)r+="(void 0)";else switch(typeof e){case"boolean":case"number":r+=`(${String(e)})`;break;case"object":if((0,_ast__WEBPACK_IMPORTED_MODULE_4__.yk)(e)){const n=e;(0,_errors__WEBPACK_IMPORTED_MODULE_1__.EZ)("(compiler)compileValue",i.varNames,n.symbol),i.varNames.has(n.symbol)?r+=`(${i.varNames.get(n.symbol)})`:(o[i.varsCount]=n.symbol,r+=`(_$_vars[${String(i.varsCount++)}])`);break}default:o[i.varsCount]=e,r+=`(_$_vars[${String(i.varsCount++)}])`}return r}function a(r,n){let t="";const c=r[n];if(Array.isArray(c))if(0<c.length){const r=(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.gG)(e,c);if(Array.isArray(r))if(0<r.length)if((0,_ast__WEBPACK_IMPORTED_MODULE_4__.yk)(r[0])){const n=r[0],s=r.slice(1);(0,_errors__WEBPACK_IMPORTED_MODULE_1__.EZ)("(compiler)compileToken",l,n.symbol),l.has(n.symbol)?t+=l.get(n.symbol)(r,s):n.symbol===e.config.reservedNames.spread?t+=`...(${s.map((r=>a([(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.zp)(e,r)],0))).join(",")})`:e.funcMap.has(n.symbol)?(o[i.varsCount]=e.funcMap.get(n.symbol).fn(e,""),t+=`((_$_vars[${String(i.varsCount++)}])(${s.map((r=>a([(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.zp)(e,r)],0))).join(",")}))`):i.varNames.has(n.symbol)?t+=`(${String(i.varNames.get(n.symbol))})(${s.map((r=>a([(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.zp)(e,r)],0))).join(",")})`:(o[i.varsCount]=(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.IQ)(e,n.symbol),t+=`((_$_vars[${String(i.varsCount++)}])()(${s.map((r=>a([(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.zp)(e,r)],0))).join(",")}))`)}else switch(typeof r[0]){case"function":o[i.varsCount]=r[0],t+=`((_$_vars[${String(i.varsCount++)}])(${r.slice(1).map(((r,n,t)=>a([(0,_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_2__.zp)(e,r)],0))).join(",")}))`;break;default:throw new Error(`[SX] compileToken: First item of list is not a function: ${JSON.stringify(r[0])}.`)}else t+="([])";else t+=s(c)}else t+="([])";else t+=s(c);return t}const i={_$_vars:o,varsCount:1,varNames:new Map,varNamesCount:0,varDefs:"var x0;",ops:new Map,makeScope:function(e){const r=new Map;for(const e of i.varNames.entries())r.set(e[0],e[1]);e(),i.varNames=r},compileToken:a};(0,_compile_ops__WEBPACK_IMPORTED_MODULE_3__.A)(e,i);const l=i.ops;e.config.enableTailCallOptimization&&(t=(0,_evaluate__WEBPACK_IMPORTED_MODULE_0__.bb)(e,r,t)),i.varNames.set(e.config.reservedNames.thiz,"(this===(Function('return this')())?null:(this===void 0?null:this))");const c=(0,_evaluate__WEBPACK_IMPORTED_MODULE_0__.h1)(e);if(c)for(const e in c)Object.prototype.hasOwnProperty.call(c,e)&&(o[i.varsCount++]=e,o[i.varsCount]=c[e],i.varNames.set(e,`(_$_vars[${String(i.varsCount)}][_$_vars[${String(i.varsCount-1)}]])`),i.varsCount++);const m=""+r.map(((e,t)=>(i.varNames.set(r[t].symbol,"a"+t),`${n&&t===r.length-1?"...":""}a${t}`))).join(","),u=`return(${t.map(((e,r)=>a(t,r))).join(",")})`;return`(function(${m}){"strict";${i.varDefs}${u}})`}function evalCompiledLambda(_$_state,_$_vars,code){return _$_vars[0]=eval(code),_$_vars[0]}function compileLambda(e,r,n,t){const o=[];return evalCompiledLambda(e,o,compileCore(e,r,n,t,o))}},69:(e,r,n)=>{n.d(r,{yT:()=>s,QH:()=>a,JU:()=>i,EZ:()=>l});var t=n(713),o=n(890);function s(e){if(e.evalCount++,e.config.maxEvalCount&&e.config.maxEvalCount<e.evalCount)throw new t.cq}function a(e,r,n,t){if(r.length<n)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${n} / args: ${r.length}.`);if(t&&t<r.length)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${t} / args: ${r.length}.`);return r}function i(e,r){if("__proto__"===r||"__defineGetter__"===r||"__defineSetter__"===r||"__lookupGetter__"===r||"__lookupSetter__"===r)throw new Error(`[SX] ${e}: Invalid var name ${r}.`);if("prototype"===r||"constructor"===r)throw new Error(`[SX] ${e}: Invalid var name ${r}.`);if(o.sC.hasOwnProperty(r))throw new Error(`[SX] ${e}: Invalid var name ${r}.`);if("call"===r||"arguments"===r||"caller"===r)throw new Error(`[SX] ${e}: Invalid var name ${r}.`);return r}function l(e,r,n){if(r===o.Be||"__proto__"===n||"__defineGetter__"===n||"__defineSetter__"===n||"__lookupGetter__"===n||"__lookupSetter__"===n)throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if(!("prototype"!==n&&"constructor"!==n||null!=r&&"function"!=typeof r))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if((null==r||r===o.sC)&&o.sC.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if(null==r||r===o.wl){let r=o.wl;for(;r;){if(r.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);r=r.__proto__}}if("function"==typeof r&&!r.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);return n}},759:(e,r,n)=>{n.d(r,{He:()=>s,ym:()=>i,Ri:()=>l,Xw:()=>c,Z_:()=>m,cj:()=>u,h1:()=>f,r6:()=>p,SI:()=>_,bR:()=>$,lW:()=>y,bb:()=>d,ku:()=>b});var t=n(788),o=n(69);function s(e){switch(typeof e){case"object":case"symbol":case"function":return NaN;default:return Number(e)}}function a(e,r){for(let n=0;n<r.length;n++)Array.isArray(r[n])&&(0,t.yk)(r[n][0],e.config.reservedNames.unquote)&&(r=r.slice(0,n).concat([b(e,r[n][1])],r.slice(n+1))),Array.isArray(r[n])&&((r=r.slice(0))[n]=a(e,r[n]));return i(e,r)}function i(e,r){if(e.config.enableSplice)for(let n=r.length-1;n>=0;n--)Array.isArray(r[n])&&(0,t.yk)(r[n][0],e.config.reservedNames.splice)&&(r=r.slice(0,n).concat(r[n][1],r.slice(n+1)));return r}function l(e,r,n){const t=e.macroMap.get(r.symbol);let o=null;if(t){let s=t;const a=n.slice(1);for(;s;){if(!s.formalArgs)return{fn:s.fn(e,r.symbol),actualArgs:n};{const t=g(0,r.symbol,s.formalArgs,Boolean(s.lastIsSpread),a);if(!t.error)return{fn:s.fn(e,r.symbol,t.formalArgs),actualArgs:n.slice(0,1).concat(t.actualArgs)};o=t.error,s=s.next}}if(o)throw new Error(o)}return!1}function c(e,r,n){for(let n=e.scopes.length-1;n>0;n--){const t=e.scopes[n];if(t&&Object.prototype.hasOwnProperty.call(t.scope,r.symbol))return t.scope;if(t.capturedScopes&&Object.prototype.hasOwnProperty.call(t.capturedScopes,r.symbol))return t.capturedScopes[r.symbol];if(!t.isBlockLocal)break}const t=y(e);return Object.prototype.hasOwnProperty.call(t.scope,r.symbol)?t.scope:n?null:$(e).scope}function m(e,r){const n=c(e,r,!0);if(n)return n[r.symbol];const t=e.symbolMap.get(r.symbol);if(t)return t.fn(e,r.symbol);if(e.config.valueSymbolResolverFallback)return e.config.valueSymbolResolverFallback(e,r.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveValueSymbol: Unresolved symbol: ${r.symbol}.`);return r.symbol}function u(e,r){const n={};for(const t of r){const r=c(e,t,!0);if(null===r)throw new Error("[SX] collectCapturedVariables: Unresolved symbols "+t);(0,o.EZ)("collectCapturedVariables",n,t.symbol),n[t.symbol]=r}return n}function f(e){const r=[];for(let n=e.scopes.length-1;n>0;n--){const t=e.scopes[n];if(t.capturedScopes&&r.unshift(t.capturedScopes),!t.isBlockLocal)break}return r.length>0?Object.assign({},...r):void 0}function p(e,r,n,t){e.scopes.push({isBlockLocal:n,scope:r,capturedScopes:t})}function _(e){if(e.scopes.length<2)throw new Error("[SX] uninstallScope: Unable to pop stack.");return e.scopes.pop()}function $(e){return e.scopes[e.scopes.length-1]}function y(e){return e.scopes[0]}function g(e,r,n,o,s){if(n=n.slice(0),(s=s.slice(0)).length+(o?1:0)<n.length)return{error:`[SX] macro call (${r}): Actual args too short: actual ${s.length} / formal ${n.length}.`};for(let e=n.length-(o?2:1);e>=0;e--){let o=n[e].symbol;if(o.startsWith("!")){if(n[e].symbol=n[e].symbol.slice(1),o=n[e].symbol,!(0,t.yk)(s[e]))return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not symbol.`}}else if(o.startsWith("<")&&o.endsWith(">")){if(n[e].symbol=n[e].symbol.slice(1,-1),o=n[e].symbol,!(0,t.yk)(s[e],o))return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not expected symbol.`};n=n.slice(0,e).concat(n.slice(e+1)),s=s.slice(0,e).concat(s.slice(e+1))}else{const a=o.lastIndexOf(":");if(0<a){const i=o.slice(a+1);switch(i){case"number":if("number"!=typeof s[e])return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not number.`};break;case"string":if("string"!=typeof s[e])return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not string.`};break;case"function":if(!Array.isArray(s[e])||!(0,t.yk)(s[e][0]))return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not function.`};break;case"list":if(!Array.isArray(s[e]))return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not list.`};break;case"symbol":if(!(0,t.yk)(s[e]))return{error:`[SX] macro call (${r}): Actual arg(${e}: ${o}) is not symbol.`};break;case"any":break;default:return{error:`[SX] macro call (${r}): Formal arg(${e}: ${o}) is unknown type ${i}.`}}n[e].symbol=n[e].symbol.slice(0,a)}}}return{formalArgs:n,actualArgs:s}}function d(e,r,n){if(Array.isArray(n[n.length-1])){const t=n.slice(0,n.length-1),o=n[n.length-1];if(o&&"object"==typeof o[0]&&o[0].symbol===e.config.reservedNames.if&&Array.isArray(o[3])&&"object"==typeof o[3][0]&&o[3][0].symbol===e.config.reservedNames.self){const n=`$__tempvar__$$ec${e.evalCount++}$$_`,s=r.map(((e,r)=>({symbol:`${n}_$i${r}_${e.symbol}`})));return[[{symbol:e.config.reservedNames.until},o[1],[{symbol:e.config.reservedNames.let},[...s],...t,...o[3].slice(1).map(((r,n)=>[{symbol:e.config.reservedNames.set},s[n],r])),...s.map(((n,t)=>[{symbol:e.config.reservedNames.set},r[t],n]))]],...t,o[2]]}}return n}function b(e,r){if((0,o.yT)(e),null==r)return r;let n=r;for(;Array.isArray(n);){{if(0===n.length)return n;n=i(e,n);const r=(0,t.yk)(n[0]);if(!r)break;{const t=l(e,r,n);if(!t)break;n=t.fn(t.actualArgs)}}(0,o.yT)(e)}if(Array.isArray(n)){if(n=n.slice(0),0<n.length){const r=(0,t.yk)(n[0]);if(r){if(r.symbol===e.config.reservedNames.quote)return n.slice(1,2)[0];if(r.symbol===e.config.reservedNames.backquote)return n=n.slice(1,2)[0],Array.isArray(n)&&(n=a(e,n)),n;if(r.symbol===e.config.reservedNames.eval)return b(e,b(e,n.slice(1,2)[0]))}const o=[];for(let r=1;r<n.length;r++)if(Array.isArray(n[r])&&(0,t.yk)(n[r][0],e.config.reservedNames.spread)){o.push(r);const t=b(e,n[r][1]);n[r]=Array.isArray(t)?t:[t]}else n[r]=b(e,n[r]);for(const e of o.reverse())n=n.slice(0,e).concat(n[e],n.slice(e+1));let s;if(s="function"==typeof n[0]?n[0]:r?function(e,r){if("function"==typeof r)return r;const n=e.funcMap.get(r.symbol);if(n)return n.fn(e,r.symbol);{const n=m(e,r);if("function"==typeof n)return n;if(e.config.funcSymbolResolverFallback)return e.config.funcSymbolResolverFallback(e,r.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveFunctionSymbol: Unresolved symbol: ${r.symbol}.`);return r.symbol}}(e,r):b(e,n[0]),"function"!=typeof s)throw new Error(`[SX] evaluate: First item of list is not a function: ${JSON.stringify(n)}.`);n=s(...n.slice(1))}}else if(e.config.wrapExternalValue&&Object.prototype.hasOwnProperty.call(n,"value"))n=n.value;else if(Object.prototype.hasOwnProperty.call(n,"symbol"))n=m(e,n);else if(Object.prototype.hasOwnProperty.call(n,"car")){const r=b(e,n.car),t=b(e,n.cdr);if(Array.isArray(t)){const e=t.slice(0);e.unshift(r),n=e}else n={car:r,cdr:t}}else Object.prototype.hasOwnProperty.call(n,"dotted")?n=[b(e,n.dotted)]:Object.prototype.hasOwnProperty.call(n,"comment")&&(n=[]);return n}},890:(e,r,n)=>{n.d(r,{Be:()=>o,sC:()=>s,wl:()=>a});const t={},{g:o,o:s,f:a}=(()=>{var e,r;let n=null;try{n=Function("return this")()}catch(e){}n||(n="object"==typeof window&&window?window:"object"==typeof global&&global?global:"object"==typeof globalThis&&globalThis?globalThis:t);let o=null;try{o=null!==(e={}.constructor)&&void 0!==e?e:Object}catch(e){}o||(o=t);let s=null;try{s=null!==(r={}.toString.constructor)&&void 0!==r?r:Function}catch(e){}return s||(s=t),{g:n,o,f:s}})()},713:(e,r,n)=>{n.d(r,{kb:()=>t,cq:()=>o,UK:()=>s});class t extends Error{constructor(e){super(e)}}class o extends t{constructor(){super("[SX] evaluate: The maximum count of evaluations has been exceeded.")}}class s extends t{constructor(e){super(`[SX] ${e}: Unexpected termination of script.`)}}}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}return __webpack_require__.d=(e,r)=>{for(var n in r)__webpack_require__.o(r,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(140)})()}));
//# sourceMappingURL=liyad.min.js.map